(self["webpackChunkbaby_log"]=self["webpackChunkbaby_log"]||[]).push([[824],{116:function(e,t,n){"use strict";var r=n(6518),o=n(9565),a=n(2652),i=n(9306),s=n(8551),l=n(1767),c=n(9539),u=n(4549),d=u("find",TypeError);r({target:"Iterator",proto:!0,real:!0,forced:d},{find:function(e){s(this);try{i(e)}catch(r){c(this,"throw",r)}if(d)return o(d,this,e);var t=l(this),n=0;return a(t,function(t,r){if(e(t,n++))return r(t)},{IS_RECORD:!0,INTERRUPTED:!0}).result}})},456:function(e,t,n){"use strict";var r=n(6518),o=n(4576),a=n(9504),i=n(4154),s=n(5169),l=a(1.1.toString),c=o.Uint8Array,u=!c||!c.prototype.toHex||!function(){try{var e=new c([255,255,255,255,255,255,255,255]);return"ffffffffffffffff"===e.toHex()}catch(t){return!1}}();c&&r({target:"Uint8Array",proto:!0,forced:u},{toHex:function(){i(this),s(this.buffer);for(var e="",t=0,n=this.length;t<n;t++){var r=l(this[t],16);e+=1===r.length?"0"+r:r}return e}})},531:function(e,t,n){"use strict";var r=n(6518),o=n(9565),a=n(9306),i=n(8551),s=n(1767),l=n(8646),c=n(9462),u=n(9539),d=n(6395),f=n(684),h=n(4549),p=!d&&!f("flatMap",function(){}),m=!d&&!p&&h("flatMap",TypeError),g=d||p||m,v=c(function(){var e,t,n=this.iterator,r=this.mapper;while(1){if(t=this.inner)try{if(e=i(o(t.next,t.iterator)),!e.done)return e.value;this.inner=null}catch(a){u(n,"throw",a)}if(e=i(o(this.next,n)),this.done=!!e.done)return;try{this.inner=l(r(e.value,this.counter++),!1)}catch(a){u(n,"throw",a)}}});r({target:"Iterator",proto:!0,real:!0,forced:g},{flatMap:function(e){i(this);try{a(e)}catch(t){u(this,"throw",t)}return m?o(m,this,e):new v(s(this),{mapper:e,inner:null})}})},655:function(e,t,n){"use strict";var r=n(6955),o=String;e.exports=function(e){if("Symbol"===r(e))throw new TypeError("Cannot convert a Symbol value to a string");return o(e)}},824:function(e,t,n){"use strict";n.d(t,{default:function(){return gl}});var r={};n.r(r),n.d(r,{hasBrowserEnv:function(){return Dr},hasStandardBrowserEnv:function(){return Ur},hasStandardBrowserWebWorkerEnv:function(){return Mr},navigator:function(){return Ir},origin:function(){return Nr}});n(4114),n(8111),n(1148),n(2489),n(116),n(7588),n(1701),n(8237),n(3579),n(7642),n(8004),n(3853),n(5876),n(2475),n(5024),n(1698);var o=n(6768),a=n(144);
/*!
  * vue-router v4.5.1
  * (c) 2025 Eduardo San Martin Morote
  * @license MIT
  */
const i="undefined"!==typeof document;function s(e){return"object"===typeof e||"displayName"in e||"props"in e||"__vccOpts"in e}function l(e){return e.__esModule||"Module"===e[Symbol.toStringTag]||e.default&&s(e.default)}const c=Object.assign;function u(e,t){const n={};for(const r in t){const o=t[r];n[r]=f(o)?o.map(e):e(o)}return n}const d=()=>{},f=Array.isArray;const h=/#/g,p=/&/g,m=/\//g,g=/=/g,v=/\?/g,y=/\+/g,w=/%5B/g,b=/%5D/g,E=/%5E/g,A=/%60/g,k=/%7B/g,R=/%7C/g,L=/%7D/g,S=/%20/g;function C(e){return encodeURI(""+e).replace(R,"|").replace(w,"[").replace(b,"]")}function T(e){return C(e).replace(k,"{").replace(L,"}").replace(E,"^")}function O(e){return C(e).replace(y,"%2B").replace(S,"+").replace(h,"%23").replace(p,"%26").replace(A,"`").replace(k,"{").replace(L,"}").replace(E,"^")}function x(e){return O(e).replace(g,"%3D")}function _(e){return C(e).replace(h,"%23").replace(v,"%3F")}function P(e){return null==e?"":_(e).replace(m,"%2F")}function D(e){try{return decodeURIComponent(""+e)}catch(t){}return""+e}const I=/\/$/,U=e=>e.replace(I,"");function M(e,t,n="/"){let r,o={},a="",i="";const s=t.indexOf("#");let l=t.indexOf("?");return s<l&&s>=0&&(l=-1),l>-1&&(r=t.slice(0,l),a=t.slice(l+1,s>-1?s:t.length),o=e(a)),s>-1&&(r=r||t.slice(0,s),i=t.slice(s,t.length)),r=W(null!=r?r:t,n),{fullPath:r+(a&&"?")+a+i,path:r,query:o,hash:D(i)}}function N(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function $(e,t){return t&&e.toLowerCase().startsWith(t.toLowerCase())?e.slice(t.length)||"/":e}function B(e,t,n){const r=t.matched.length-1,o=n.matched.length-1;return r>-1&&r===o&&F(t.matched[r],n.matched[o])&&j(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function F(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function j(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!V(e[n],t[n]))return!1;return!0}function V(e,t){return f(e)?X(e,t):f(t)?X(t,e):e===t}function X(e,t){return f(t)?e.length===t.length&&e.every((e,n)=>e===t[n]):1===e.length&&e[0]===t}function W(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),r=e.split("/"),o=r[r.length-1];".."!==o&&"."!==o||r.push("");let a,i,s=n.length-1;for(a=0;a<r.length;a++)if(i=r[a],"."!==i){if(".."!==i)break;s>1&&s--}return n.slice(0,s).join("/")+"/"+r.slice(a).join("/")}const q={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var K,z;(function(e){e["pop"]="pop",e["push"]="push"})(K||(K={})),function(e){e["back"]="back",e["forward"]="forward",e["unknown"]=""}(z||(z={}));function Q(e){if(!e)if(i){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return"/"!==e[0]&&"#"!==e[0]&&(e="/"+e),U(e)}const H=/^[^#]+#/;function Y(e,t){return e.replace(H,"#")+t}function J(e,t){const n=document.documentElement.getBoundingClientRect(),r=e.getBoundingClientRect();return{behavior:t.behavior,left:r.left-n.left-(t.left||0),top:r.top-n.top-(t.top||0)}}const G=()=>({left:window.scrollX,top:window.scrollY});function Z(e){let t;if("el"in e){const n=e.el,r="string"===typeof n&&n.startsWith("#");0;const o="string"===typeof n?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!o)return;t=J(o,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(null!=t.left?t.left:window.scrollX,null!=t.top?t.top:window.scrollY)}function ee(e,t){const n=history.state?history.state.position-t:-1;return n+e}const te=new Map;function ne(e,t){te.set(e,t)}function re(e){const t=te.get(e);return te.delete(e),t}let oe=()=>location.protocol+"//"+location.host;function ae(e,t){const{pathname:n,search:r,hash:o}=t,a=e.indexOf("#");if(a>-1){let t=o.includes(e.slice(a))?e.slice(a).length:1,n=o.slice(t);return"/"!==n[0]&&(n="/"+n),$(n,"")}const i=$(n,e);return i+r+o}function ie(e,t,n,r){let o=[],a=[],i=null;const s=({state:a})=>{const s=ae(e,location),l=n.value,c=t.value;let u=0;if(a){if(n.value=s,t.value=a,i&&i===l)return void(i=null);u=c?a.position-c.position:0}else r(s);o.forEach(e=>{e(n.value,l,{delta:u,type:K.pop,direction:u?u>0?z.forward:z.back:z.unknown})})};function l(){i=n.value}function u(e){o.push(e);const t=()=>{const t=o.indexOf(e);t>-1&&o.splice(t,1)};return a.push(t),t}function d(){const{history:e}=window;e.state&&e.replaceState(c({},e.state,{scroll:G()}),"")}function f(){for(const e of a)e();a=[],window.removeEventListener("popstate",s),window.removeEventListener("beforeunload",d)}return window.addEventListener("popstate",s),window.addEventListener("beforeunload",d,{passive:!0}),{pauseListeners:l,listen:u,destroy:f}}function se(e,t,n,r=!1,o=!1){return{back:e,current:t,forward:n,replaced:r,position:window.history.length,scroll:o?G():null}}function le(e){const{history:t,location:n}=window,r={value:ae(e,n)},o={value:t.state};function a(r,a,i){const s=e.indexOf("#"),l=s>-1?(n.host&&document.querySelector("base")?e:e.slice(s))+r:oe()+e+r;try{t[i?"replaceState":"pushState"](a,"",l),o.value=a}catch(c){console.error(c),n[i?"replace":"assign"](l)}}function i(e,n){const i=c({},t.state,se(o.value.back,e,o.value.forward,!0),n,{position:o.value.position});a(e,i,!0),r.value=e}function s(e,n){const i=c({},o.value,t.state,{forward:e,scroll:G()});a(i.current,i,!0);const s=c({},se(r.value,e,null),{position:i.position+1},n);a(e,s,!1),r.value=e}return o.value||a(r.value,{back:null,current:r.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0),{location:r,state:o,push:s,replace:i}}function ce(e){e=Q(e);const t=le(e),n=ie(e,t.state,t.location,t.replace);function r(e,t=!0){t||n.pauseListeners(),history.go(e)}const o=c({location:"",base:e,go:r,createHref:Y.bind(null,e)},t,n);return Object.defineProperty(o,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(o,"state",{enumerable:!0,get:()=>t.state.value}),o}function ue(e){return"string"===typeof e||e&&"object"===typeof e}function de(e){return"string"===typeof e||"symbol"===typeof e}const fe=Symbol("");var he;(function(e){e[e["aborted"]=4]="aborted",e[e["cancelled"]=8]="cancelled",e[e["duplicated"]=16]="duplicated"})(he||(he={}));function pe(e,t){return c(new Error,{type:e,[fe]:!0},t)}function me(e,t){return e instanceof Error&&fe in e&&(null==t||!!(e.type&t))}const ge="[^/]+?",ve={sensitive:!1,strict:!1,start:!0,end:!0},ye=/[.+*?^${}()[\]/\\]/g;function we(e,t){const n=c({},ve,t),r=[];let o=n.start?"^":"";const a=[];for(const c of e){const e=c.length?[]:[90];n.strict&&!c.length&&(o+="/");for(let t=0;t<c.length;t++){const r=c[t];let i=40+(n.sensitive?.25:0);if(0===r.type)t||(o+="/"),o+=r.value.replace(ye,"\\$&"),i+=40;else if(1===r.type){const{value:e,repeatable:n,optional:s,regexp:l}=r;a.push({name:e,repeatable:n,optional:s});const d=l||ge;if(d!==ge){i+=10;try{new RegExp(`(${d})`)}catch(u){throw new Error(`Invalid custom RegExp for param "${e}" (${d}): `+u.message)}}let f=n?`((?:${d})(?:/(?:${d}))*)`:`(${d})`;t||(f=s&&c.length<2?`(?:/${f})`:"/"+f),s&&(f+="?"),o+=f,i+=20,s&&(i+=-8),n&&(i+=-20),".*"===d&&(i+=-50)}e.push(i)}r.push(e)}if(n.strict&&n.end){const e=r.length-1;r[e][r[e].length-1]+=.7000000000000001}n.strict||(o+="/?"),n.end?o+="$":n.strict&&!o.endsWith("/")&&(o+="(?:/|$)");const i=new RegExp(o,n.sensitive?"":"i");function s(e){const t=e.match(i),n={};if(!t)return null;for(let r=1;r<t.length;r++){const e=t[r]||"",o=a[r-1];n[o.name]=e&&o.repeatable?e.split("/"):e}return n}function l(t){let n="",r=!1;for(const o of e){r&&n.endsWith("/")||(n+="/"),r=!1;for(const e of o)if(0===e.type)n+=e.value;else if(1===e.type){const{value:a,repeatable:i,optional:s}=e,l=a in t?t[a]:"";if(f(l)&&!i)throw new Error(`Provided param "${a}" is an array but it is not repeatable (* or + modifiers)`);const c=f(l)?l.join("/"):l;if(!c){if(!s)throw new Error(`Missing required param "${a}"`);o.length<2&&(n.endsWith("/")?n=n.slice(0,-1):r=!0)}n+=c}}return n||"/"}return{re:i,score:r,keys:a,parse:s,stringify:l}}function be(e,t){let n=0;while(n<e.length&&n<t.length){const r=t[n]-e[n];if(r)return r;n++}return e.length<t.length?1===e.length&&80===e[0]?-1:1:e.length>t.length?1===t.length&&80===t[0]?1:-1:0}function Ee(e,t){let n=0;const r=e.score,o=t.score;while(n<r.length&&n<o.length){const e=be(r[n],o[n]);if(e)return e;n++}if(1===Math.abs(o.length-r.length)){if(Ae(r))return 1;if(Ae(o))return-1}return o.length-r.length}function Ae(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const ke={type:0,value:""},Re=/[a-zA-Z0-9_]/;function Le(e){if(!e)return[[]];if("/"===e)return[[ke]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(e){throw new Error(`ERR (${n})/"${c}": ${e}`)}let n=0,r=n;const o=[];let a;function i(){a&&o.push(a),a=[]}let s,l=0,c="",u="";function d(){c&&(0===n?a.push({type:0,value:c}):1===n||2===n||3===n?(a.length>1&&("*"===s||"+"===s)&&t(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),a.push({type:1,value:c,regexp:u,repeatable:"*"===s||"+"===s,optional:"*"===s||"?"===s})):t("Invalid state to consume buffer"),c="")}function f(){c+=s}while(l<e.length)if(s=e[l++],"\\"!==s||2===n)switch(n){case 0:"/"===s?(c&&d(),i()):":"===s?(d(),n=1):f();break;case 4:f(),n=r;break;case 1:"("===s?n=2:Re.test(s)?f():(d(),n=0,"*"!==s&&"?"!==s&&"+"!==s&&l--);break;case 2:")"===s?"\\"==u[u.length-1]?u=u.slice(0,-1)+s:n=3:u+=s;break;case 3:d(),n=0,"*"!==s&&"?"!==s&&"+"!==s&&l--,u="";break;default:t("Unknown state");break}else r=n,n=4;return 2===n&&t(`Unfinished custom RegExp for param "${c}"`),d(),i(),o}function Se(e,t,n){const r=we(Le(e.path),n);const o=c(r,{record:e,parent:t,children:[],alias:[]});return t&&!o.record.aliasOf===!t.record.aliasOf&&t.children.push(o),o}function Ce(e,t){const n=[],r=new Map;function o(e){return r.get(e)}function a(e,n,r){const o=!r,s=Oe(e);s.aliasOf=r&&r.record;const u=De(t,e),f=[s];if("alias"in e){const t="string"===typeof e.alias?[e.alias]:e.alias;for(const e of t)f.push(Oe(c({},s,{components:r?r.record.components:s.components,path:e,aliasOf:r?r.record:s})))}let h,p;for(const t of f){const{path:c}=t;if(n&&"/"!==c[0]){const e=n.record.path,r="/"===e[e.length-1]?"":"/";t.path=n.record.path+(c&&r+c)}if(h=Se(t,n,u),r?r.alias.push(h):(p=p||h,p!==h&&p.alias.push(h),o&&e.name&&!_e(h)&&i(e.name)),Me(h)&&l(h),s.children){const e=s.children;for(let t=0;t<e.length;t++)a(e[t],h,r&&r.children[t])}r=r||h}return p?()=>{i(p)}:d}function i(e){if(de(e)){const t=r.get(e);t&&(r.delete(e),n.splice(n.indexOf(t),1),t.children.forEach(i),t.alias.forEach(i))}else{const t=n.indexOf(e);t>-1&&(n.splice(t,1),e.record.name&&r.delete(e.record.name),e.children.forEach(i),e.alias.forEach(i))}}function s(){return n}function l(e){const t=Ie(e,n);n.splice(t,0,e),e.record.name&&!_e(e)&&r.set(e.record.name,e)}function u(e,t){let o,a,i,s={};if("name"in e&&e.name){if(o=r.get(e.name),!o)throw pe(1,{location:e});0,i=o.record.name,s=c(Te(t.params,o.keys.filter(e=>!e.optional).concat(o.parent?o.parent.keys.filter(e=>e.optional):[]).map(e=>e.name)),e.params&&Te(e.params,o.keys.map(e=>e.name))),a=o.stringify(s)}else if(null!=e.path)a=e.path,o=n.find(e=>e.re.test(a)),o&&(s=o.parse(a),i=o.record.name);else{if(o=t.name?r.get(t.name):n.find(e=>e.re.test(t.path)),!o)throw pe(1,{location:e,currentLocation:t});i=o.record.name,s=c({},t.params,e.params),a=o.stringify(s)}const l=[];let u=o;while(u)l.unshift(u.record),u=u.parent;return{name:i,path:a,params:s,matched:l,meta:Pe(l)}}function f(){n.length=0,r.clear()}return t=De({strict:!1,end:!0,sensitive:!1},t),e.forEach(e=>a(e)),{addRoute:a,resolve:u,removeRoute:i,clearRoutes:f,getRoutes:s,getRecordMatcher:o}}function Te(e,t){const n={};for(const r of t)r in e&&(n[r]=e[r]);return n}function Oe(e){const t={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:xe(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function xe(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const r in e.components)t[r]="object"===typeof n?n[r]:n;return t}function _e(e){while(e){if(e.record.aliasOf)return!0;e=e.parent}return!1}function Pe(e){return e.reduce((e,t)=>c(e,t.meta),{})}function De(e,t){const n={};for(const r in e)n[r]=r in t?t[r]:e[r];return n}function Ie(e,t){let n=0,r=t.length;while(n!==r){const o=n+r>>1,a=Ee(e,t[o]);a<0?r=o:n=o+1}const o=Ue(e);return o&&(r=t.lastIndexOf(o,r-1)),r}function Ue(e){let t=e;while(t=t.parent)if(Me(t)&&0===Ee(e,t))return t}function Me({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function Ne(e){const t={};if(""===e||"?"===e)return t;const n="?"===e[0],r=(n?e.slice(1):e).split("&");for(let o=0;o<r.length;++o){const e=r[o].replace(y," "),n=e.indexOf("="),a=D(n<0?e:e.slice(0,n)),i=n<0?null:D(e.slice(n+1));if(a in t){let e=t[a];f(e)||(e=t[a]=[e]),e.push(i)}else t[a]=i}return t}function $e(e){let t="";for(let n in e){const r=e[n];if(n=x(n),null==r){void 0!==r&&(t+=(t.length?"&":"")+n);continue}const o=f(r)?r.map(e=>e&&O(e)):[r&&O(r)];o.forEach(e=>{void 0!==e&&(t+=(t.length?"&":"")+n,null!=e&&(t+="="+e))})}return t}function Be(e){const t={};for(const n in e){const r=e[n];void 0!==r&&(t[n]=f(r)?r.map(e=>null==e?null:""+e):null==r?r:""+r)}return t}const Fe=Symbol(""),je=Symbol(""),Ve=Symbol(""),Xe=Symbol(""),We=Symbol("");function qe(){let e=[];function t(t){return e.push(t),()=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)}}function n(){e=[]}return{add:t,list:()=>e.slice(),reset:n}}function Ke(e,t,n,r,o,a=e=>e()){const i=r&&(r.enterCallbacks[o]=r.enterCallbacks[o]||[]);return()=>new Promise((s,l)=>{const c=e=>{!1===e?l(pe(4,{from:n,to:t})):e instanceof Error?l(e):ue(e)?l(pe(2,{from:t,to:e})):(i&&r.enterCallbacks[o]===i&&"function"===typeof e&&i.push(e),s())},u=a(()=>e.call(r&&r.instances[o],t,n,c));let d=Promise.resolve(u);e.length<3&&(d=d.then(c)),d.catch(e=>l(e))})}function ze(e,t,n,r,o=e=>e()){const a=[];for(const i of e){0;for(const e in i.components){let c=i.components[e];if("beforeRouteEnter"===t||i.instances[e])if(s(c)){const s=c.__vccOpts||c,l=s[t];l&&a.push(Ke(l,n,r,i,e,o))}else{let s=c();0,a.push(()=>s.then(a=>{if(!a)throw new Error(`Couldn't resolve component "${e}" at "${i.path}"`);const s=l(a)?a.default:a;i.mods[e]=a,i.components[e]=s;const c=s.__vccOpts||s,u=c[t];return u&&Ke(u,n,r,i,e,o)()}))}}}return a}function Qe(e){const t=(0,o.WQ)(Ve),n=(0,o.WQ)(Xe);const r=(0,o.EW)(()=>{const n=(0,a.R1)(e.to);return t.resolve(n)}),i=(0,o.EW)(()=>{const{matched:e}=r.value,{length:t}=e,o=e[t-1],a=n.matched;if(!o||!a.length)return-1;const i=a.findIndex(F.bind(null,o));if(i>-1)return i;const s=et(e[t-2]);return t>1&&et(o)===s&&a[a.length-1].path!==s?a.findIndex(F.bind(null,e[t-2])):i}),s=(0,o.EW)(()=>i.value>-1&&Ze(n.params,r.value.params)),l=(0,o.EW)(()=>i.value>-1&&i.value===n.matched.length-1&&j(n.params,r.value.params));function c(n={}){if(Ge(n)){const n=t[(0,a.R1)(e.replace)?"replace":"push"]((0,a.R1)(e.to)).catch(d);return e.viewTransition&&"undefined"!==typeof document&&"startViewTransition"in document&&document.startViewTransition(()=>n),n}return Promise.resolve()}return{route:r,href:(0,o.EW)(()=>r.value.href),isActive:s,isExactActive:l,navigate:c}}function He(e){return 1===e.length?e[0]:e}const Ye=(0,o.pM)({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:Qe,setup(e,{slots:t}){const n=(0,a.Kh)(Qe(e)),{options:r}=(0,o.WQ)(Ve),i=(0,o.EW)(()=>({[tt(e.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[tt(e.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const r=t.default&&He(t.default(n));return e.custom?r:(0,o.h)("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:i.value},r)}}}),Je=Ye;function Ge(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&(void 0===e.button||0===e.button)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function Ze(e,t){for(const n in t){const r=t[n],o=e[n];if("string"===typeof r){if(r!==o)return!1}else if(!f(o)||o.length!==r.length||r.some((e,t)=>e!==o[t]))return!1}return!0}function et(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const tt=(e,t,n)=>null!=e?e:null!=t?t:n,nt=(0,o.pM)({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:n}){const r=(0,o.WQ)(We),i=(0,o.EW)(()=>e.route||r.value),s=(0,o.WQ)(je,0),l=(0,o.EW)(()=>{let e=(0,a.R1)(s);const{matched:t}=i.value;let n;while((n=t[e])&&!n.components)e++;return e}),u=(0,o.EW)(()=>i.value.matched[l.value]);(0,o.Gt)(je,(0,o.EW)(()=>l.value+1)),(0,o.Gt)(Fe,u),(0,o.Gt)(We,i);const d=(0,a.KR)();return(0,o.wB)(()=>[d.value,u.value,e.name],([e,t,n],[r,o,a])=>{t&&(t.instances[n]=e,o&&o!==t&&e&&e===r&&(t.leaveGuards.size||(t.leaveGuards=o.leaveGuards),t.updateGuards.size||(t.updateGuards=o.updateGuards))),!e||!t||o&&F(t,o)&&r||(t.enterCallbacks[n]||[]).forEach(t=>t(e))},{flush:"post"}),()=>{const r=i.value,a=e.name,s=u.value,l=s&&s.components[a];if(!l)return rt(n.default,{Component:l,route:r});const f=s.props[a],h=f?!0===f?r.params:"function"===typeof f?f(r):f:null,p=e=>{e.component.isUnmounted&&(s.instances[a]=null)},m=(0,o.h)(l,c({},h,t,{onVnodeUnmounted:p,ref:d}));return rt(n.default,{Component:m,route:r})||m}}});function rt(e,t){if(!e)return null;const n=e(t);return 1===n.length?n[0]:n}const ot=nt;function at(e){const t=Ce(e.routes,e),n=e.parseQuery||Ne,r=e.stringifyQuery||$e,s=e.history;const l=qe(),h=qe(),p=qe(),m=(0,a.IJ)(q);let g=q;i&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const v=u.bind(null,e=>""+e),y=u.bind(null,P),w=u.bind(null,D);function b(e,n){let r,o;return de(e)?(r=t.getRecordMatcher(e),o=n):o=e,t.addRoute(o,r)}function E(e){const n=t.getRecordMatcher(e);n&&t.removeRoute(n)}function A(){return t.getRoutes().map(e=>e.record)}function k(e){return!!t.getRecordMatcher(e)}function R(e,o){if(o=c({},o||m.value),"string"===typeof e){const r=M(n,e,o.path),a=t.resolve({path:r.path},o),i=s.createHref(r.fullPath);return c(r,a,{params:w(a.params),hash:D(r.hash),redirectedFrom:void 0,href:i})}let a;if(null!=e.path)a=c({},e,{path:M(n,e.path,o.path).path});else{const t=c({},e.params);for(const e in t)null==t[e]&&delete t[e];a=c({},e,{params:y(t)}),o.params=y(o.params)}const i=t.resolve(a,o),l=e.hash||"";i.params=v(w(i.params));const u=N(r,c({},e,{hash:T(l),path:i.path})),d=s.createHref(u);return c({fullPath:u,hash:l,query:r===$e?Be(e.query):e.query||{}},i,{redirectedFrom:void 0,href:d})}function L(e){return"string"===typeof e?M(n,e,m.value.path):c({},e)}function S(e,t){if(g!==e)return pe(8,{from:t,to:e})}function C(e){return _(e)}function O(e){return C(c(L(e),{replace:!0}))}function x(e){const t=e.matched[e.matched.length-1];if(t&&t.redirect){const{redirect:n}=t;let r="function"===typeof n?n(e):n;return"string"===typeof r&&(r=r.includes("?")||r.includes("#")?r=L(r):{path:r},r.params={}),c({query:e.query,hash:e.hash,params:null!=r.path?{}:e.params},r)}}function _(e,t){const n=g=R(e),o=m.value,a=e.state,i=e.force,s=!0===e.replace,l=x(n);if(l)return _(c(L(l),{state:"object"===typeof l?c({},a,l.state):a,force:i,replace:s}),t||n);const u=n;let d;return u.redirectedFrom=t,!i&&B(r,o,n)&&(d=pe(16,{to:u,from:o}),te(o,o,!0,!1)),(d?Promise.resolve(d):$(u,o)).catch(e=>me(e)?me(e,2)?e:J(e):H(e,u,o)).then(e=>{if(e){if(me(e,2))return _(c({replace:s},L(e.to),{state:"object"===typeof e.to?c({},a,e.to.state):a,force:i}),t||u)}else e=j(u,o,!0,s,a);return F(u,o,e),e})}function I(e,t){const n=S(e,t);return n?Promise.reject(n):Promise.resolve()}function U(e){const t=ie.values().next().value;return t&&"function"===typeof t.runWithContext?t.runWithContext(e):e()}function $(e,t){let n;const[r,o,a]=it(e,t);n=ze(r.reverse(),"beforeRouteLeave",e,t);for(const s of r)s.leaveGuards.forEach(r=>{n.push(Ke(r,e,t))});const i=I.bind(null,e,t);return n.push(i),le(n).then(()=>{n=[];for(const r of l.list())n.push(Ke(r,e,t));return n.push(i),le(n)}).then(()=>{n=ze(o,"beforeRouteUpdate",e,t);for(const r of o)r.updateGuards.forEach(r=>{n.push(Ke(r,e,t))});return n.push(i),le(n)}).then(()=>{n=[];for(const r of a)if(r.beforeEnter)if(f(r.beforeEnter))for(const o of r.beforeEnter)n.push(Ke(o,e,t));else n.push(Ke(r.beforeEnter,e,t));return n.push(i),le(n)}).then(()=>(e.matched.forEach(e=>e.enterCallbacks={}),n=ze(a,"beforeRouteEnter",e,t,U),n.push(i),le(n))).then(()=>{n=[];for(const r of h.list())n.push(Ke(r,e,t));return n.push(i),le(n)}).catch(e=>me(e,8)?e:Promise.reject(e))}function F(e,t,n){p.list().forEach(r=>U(()=>r(e,t,n)))}function j(e,t,n,r,o){const a=S(e,t);if(a)return a;const l=t===q,u=i?history.state:{};n&&(r||l?s.replace(e.fullPath,c({scroll:l&&u&&u.scroll},o)):s.push(e.fullPath,o)),m.value=e,te(e,t,n,l),J()}let V;function X(){V||(V=s.listen((e,t,n)=>{if(!se.listening)return;const r=R(e),o=x(r);if(o)return void _(c(o,{replace:!0,force:!0}),r).catch(d);g=r;const a=m.value;i&&ne(ee(a.fullPath,n.delta),G()),$(r,a).catch(e=>me(e,12)?e:me(e,2)?(_(c(L(e.to),{force:!0}),r).then(e=>{me(e,20)&&!n.delta&&n.type===K.pop&&s.go(-1,!1)}).catch(d),Promise.reject()):(n.delta&&s.go(-n.delta,!1),H(e,r,a))).then(e=>{e=e||j(r,a,!1),e&&(n.delta&&!me(e,8)?s.go(-n.delta,!1):n.type===K.pop&&me(e,20)&&s.go(-1,!1)),F(r,a,e)}).catch(d)}))}let W,z=qe(),Q=qe();function H(e,t,n){J(e);const r=Q.list();return r.length?r.forEach(r=>r(e,t,n)):console.error(e),Promise.reject(e)}function Y(){return W&&m.value!==q?Promise.resolve():new Promise((e,t)=>{z.add([e,t])})}function J(e){return W||(W=!e,X(),z.list().forEach(([t,n])=>e?n(e):t()),z.reset()),e}function te(t,n,r,a){const{scrollBehavior:s}=e;if(!i||!s)return Promise.resolve();const l=!r&&re(ee(t.fullPath,0))||(a||!r)&&history.state&&history.state.scroll||null;return(0,o.dY)().then(()=>s(t,n,l)).then(e=>e&&Z(e)).catch(e=>H(e,t,n))}const oe=e=>s.go(e);let ae;const ie=new Set,se={currentRoute:m,listening:!0,addRoute:b,removeRoute:E,clearRoutes:t.clearRoutes,hasRoute:k,getRoutes:A,resolve:R,options:e,push:C,replace:O,go:oe,back:()=>oe(-1),forward:()=>oe(1),beforeEach:l.add,beforeResolve:h.add,afterEach:p.add,onError:Q.add,isReady:Y,install(e){const t=this;e.component("RouterLink",Je),e.component("RouterView",ot),e.config.globalProperties.$router=t,Object.defineProperty(e.config.globalProperties,"$route",{enumerable:!0,get:()=>(0,a.R1)(m)}),i&&!ae&&m.value===q&&(ae=!0,C(s.location).catch(e=>{0}));const n={};for(const o in q)Object.defineProperty(n,o,{get:()=>m.value[o],enumerable:!0});e.provide(Ve,t),e.provide(Xe,(0,a.Gc)(n)),e.provide(We,m);const r=e.unmount;ie.add(e),e.unmount=function(){ie.delete(e),ie.size<1&&(g=q,V&&V(),V=null,m.value=q,ae=!1,W=!1),r()}}};function le(e){return e.reduce((e,t)=>e.then(()=>U(t)),Promise.resolve())}return se}function it(e,t){const n=[],r=[],o=[],a=Math.max(t.matched.length,e.matched.length);for(let i=0;i<a;i++){const a=t.matched[i];a&&(e.matched.find(e=>F(e,a))?r.push(a):n.push(a));const s=e.matched[i];s&&(t.matched.find(e=>F(e,s))||o.push(s))}return[n,r,o]}function st(){return(0,o.WQ)(Ve)}function lt(e){return(0,o.WQ)(Xe)}var ct=n(4232),ut=n(5130);const dt={class:"home"},ft={class:"header"},ht={class:"baby-info"},pt={class:"info"},mt={class:"baby-age"},gt={class:"stats"},vt={class:"stat-item"},yt={class:"stat-number"},wt={class:"stat-item"},bt={class:"stat-number"},Et={class:"stat-item"},At={class:"stat-number"},kt={class:"stat-item"},Rt={class:"stat-number"},Lt={class:"timeline-container"},St={class:"timeline-header"},Ct={class:"sort-control"},Tt={class:"sort-checkbox"},Ot={class:"sort-label"},xt={key:0,class:"loading-container"},_t={key:1,class:"error-container"},Pt={key:2,class:"timeline"},Dt={class:"period-header"},It={class:"period-age"},Ut={class:"period-date"},Mt={class:"events-grid"},Nt=["data-event-id","onClick"],$t={class:"event-photos"},Bt={key:0,class:"more-photos"},Ft={class:"event-info"},jt={class:"event-title"},Vt={class:"event-description"},Xt={class:"event-meta"},Wt={key:0,class:"audio-indicator"},qt={key:1,class:"video-indicator"},Kt={class:"photo-count"},zt={key:2,class:"video-count"},Qt={key:3,class:"audio-count"};function Ht(e,t,n,r,a,i){const s=(0,o.g2)("LazyImage"),l=(0,o.g2)("PerformancePanel");return(0,o.uX)(),(0,o.CE)("div",dt,[(0,o.Lk)("header",ft,[(0,o.Lk)("div",ht,[t[5]||(t[5]=(0,o.Lk)("div",{class:"avatar"},"👶",-1)),(0,o.Lk)("div",pt,[t[4]||(t[4]=(0,o.Lk)("h1",{class:"baby-name"},"刘知许小朋友",-1)),(0,o.Lk)("p",mt,(0,ct.v_)(r.currentAge),1)])]),(0,o.Lk)("div",gt,[(0,o.Lk)("div",vt,[(0,o.Lk)("div",yt,(0,ct.v_)(r.totalEvents),1),t[6]||(t[6]=(0,o.Lk)("div",{class:"stat-label"},"个事件",-1))]),(0,o.Lk)("div",wt,[(0,o.Lk)("div",bt,(0,ct.v_)(r.totalPhotos),1),t[7]||(t[7]=(0,o.Lk)("div",{class:"stat-label"},"张照片",-1))]),(0,o.Lk)("div",Et,[(0,o.Lk)("div",At,(0,ct.v_)(r.totalVideos),1),t[8]||(t[8]=(0,o.Lk)("div",{class:"stat-label"},"个视频",-1))]),(0,o.Lk)("div",kt,[(0,o.Lk)("div",Rt,(0,ct.v_)(r.totalAudios),1),t[9]||(t[9]=(0,o.Lk)("div",{class:"stat-label"},"段录音",-1))])])]),(0,o.Lk)("div",Lt,[(0,o.Lk)("div",St,[t[11]||(t[11]=(0,o.Lk)("h2",{class:"timeline-title"},"成长时光轴",-1)),(0,o.Lk)("div",Ct,[(0,o.Lk)("label",Tt,[(0,o.bo)((0,o.Lk)("input",{type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=e=>r.sortAscending=e),onChange:t[1]||(t[1]=(...e)=>r.onSortChange&&r.onSortChange(...e))},null,544),[[ut.lH,r.sortAscending]]),t[10]||(t[10]=(0,o.Lk)("span",{class:"checkmark"},null,-1)),(0,o.Lk)("span",Ot,(0,ct.v_)(r.sortAscending?"最新在下":"最新在上"),1)])])]),r.loading?((0,o.uX)(),(0,o.CE)("div",xt,[...t[12]||(t[12]=[(0,o.Lk)("div",{class:"loading-spinner"},"⏳",-1),(0,o.Lk)("p",null,"正在加载成长记录...",-1)])])):r.error?((0,o.uX)(),(0,o.CE)("div",_t,[t[13]||(t[13]=(0,o.Lk)("div",{class:"error-icon"},"⚠️",-1)),(0,o.Lk)("p",null,(0,ct.v_)(r.error),1),(0,o.Lk)("button",{class:"retry-btn",onClick:t[2]||(t[2]=(...e)=>r.loadEventsList&&r.loadEventsList(...e))},"重试")])):((0,o.uX)(),(0,o.CE)("div",Pt,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(r.sortedTimelinePeriods,(e,t)=>((0,o.uX)(),(0,o.CE)("div",{key:t,class:"timeline-period"},[(0,o.Lk)("div",Dt,[(0,o.Lk)("div",It,(0,ct.v_)(e.age),1),(0,o.Lk)("div",Ut,(0,ct.v_)(e.date),1)]),(0,o.Lk)("div",Mt,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.events,e=>((0,o.uX)(),(0,o.CE)("div",{key:e.id,class:"event-card","data-event-id":e.id,onClick:t=>r.viewEvent(e)},[(0,o.Lk)("div",$t,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(r.getAllMediaItems(e).slice(0,4),(n,a)=>((0,o.uX)(),(0,o.Wv)(s,{key:`${n.type}-${a}`,src:r.getMediaUrl(e.id,n.fileName,!0),alt:`${e.title} - ${"video"===n.type?"视频":"图片"}${a+1}`,small:r.getAllMediaItems(e).length>1,preload:r.shouldPreloadImage(t,a),priority:r.getImagePriority(t,a),threshold:r.loadingStrategy.threshold,class:(0,ct.C4)(["photo-item",{small:r.getAllMediaItems(e).length>1,"video-thumbnail":"video"===n.type}])},null,8,["src","alt","small","preload","priority","threshold","class"]))),128)),r.getAllMediaItems(e).length>4?((0,o.uX)(),(0,o.CE)("div",Bt," +"+(0,ct.v_)(r.getAllMediaItems(e).length-4),1)):(0,o.Q3)("",!0)]),(0,o.Lk)("div",Ft,[(0,o.Lk)("h3",jt,(0,ct.v_)(e.title),1),(0,o.Lk)("p",Vt,(0,ct.v_)(e.description),1),(0,o.Lk)("div",Xt,[e.media.audios.length>0?((0,o.uX)(),(0,o.CE)("span",Wt,"🎵")):(0,o.Q3)("",!0),e.media.videos.length>0?((0,o.uX)(),(0,o.CE)("span",qt,"🎬")):(0,o.Q3)("",!0),(0,o.Lk)("span",Kt,(0,ct.v_)(e.media.images.length)+"张照片",1),e.media.videos.length>0?((0,o.uX)(),(0,o.CE)("span",zt,(0,ct.v_)(e.media.videos.length)+"个视频",1)):(0,o.Q3)("",!0),e.media.audios.length>0?((0,o.uX)(),(0,o.CE)("span",Qt,(0,ct.v_)(e.media.audios.length)+"段音频",1)):(0,o.Q3)("",!0)])])],8,Nt))),128))])]))),128))]))]),(0,o.Lk)("button",{class:"fab",onClick:t[3]||(t[3]=(...e)=>r.addEvent&&r.addEvent(...e))}," ➕ "),(0,o.bF)(l)])}n(531);var Yt=n(1576),Jt=n.n(Yt);n(6573),n(8100),n(7936),n(9577),n(1549),n(9797),n(9631),n(5623),n(9848);function Gt(e,t){return function(){return e.apply(t,arguments)}}const{toString:Zt}=Object.prototype,{getPrototypeOf:en}=Object,{iterator:tn,toStringTag:nn}=Symbol,rn=(e=>t=>{const n=Zt.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),on=e=>(e=e.toLowerCase(),t=>rn(t)===e),an=e=>t=>typeof t===e,{isArray:sn}=Array,ln=an("undefined");function cn(e){return null!==e&&!ln(e)&&null!==e.constructor&&!ln(e.constructor)&&hn(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const un=on("ArrayBuffer");function dn(e){let t;return t="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&un(e.buffer),t}const fn=an("string"),hn=an("function"),pn=an("number"),mn=e=>null!==e&&"object"===typeof e,gn=e=>!0===e||!1===e,vn=e=>{if("object"!==rn(e))return!1;const t=en(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(nn in e)&&!(tn in e)},yn=e=>{if(!mn(e)||cn(e))return!1;try{return 0===Object.keys(e).length&&Object.getPrototypeOf(e)===Object.prototype}catch(t){return!1}},wn=on("Date"),bn=on("File"),En=on("Blob"),An=on("FileList"),kn=e=>mn(e)&&hn(e.pipe),Rn=e=>{let t;return e&&("function"===typeof FormData&&e instanceof FormData||hn(e.append)&&("formdata"===(t=rn(e))||"object"===t&&hn(e.toString)&&"[object FormData]"===e.toString()))},Ln=on("URLSearchParams"),[Sn,Cn,Tn,On]=["ReadableStream","Request","Response","Headers"].map(on),xn=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function _n(e,t,{allOwnKeys:n=!1}={}){if(null===e||"undefined"===typeof e)return;let r,o;if("object"!==typeof e&&(e=[e]),sn(e))for(r=0,o=e.length;r<o;r++)t.call(null,e[r],r,e);else{if(cn(e))return;const o=n?Object.getOwnPropertyNames(e):Object.keys(e),a=o.length;let i;for(r=0;r<a;r++)i=o[r],t.call(null,e[i],i,e)}}function Pn(e,t){if(cn(e))return null;t=t.toLowerCase();const n=Object.keys(e);let r,o=n.length;while(o-- >0)if(r=n[o],t===r.toLowerCase())return r;return null}const Dn=(()=>"undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:global)(),In=e=>!ln(e)&&e!==Dn;function Un(){const{caseless:e,skipUndefined:t}=In(this)&&this||{},n={},r=(r,o)=>{const a=e&&Pn(n,o)||o;vn(n[a])&&vn(r)?n[a]=Un(n[a],r):vn(r)?n[a]=Un({},r):sn(r)?n[a]=r.slice():t&&ln(r)||(n[a]=r)};for(let o=0,a=arguments.length;o<a;o++)arguments[o]&&_n(arguments[o],r);return n}const Mn=(e,t,n,{allOwnKeys:r}={})=>(_n(t,(t,r)=>{n&&hn(t)?e[r]=Gt(t,n):e[r]=t},{allOwnKeys:r}),e),Nn=e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),$n=(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},Bn=(e,t,n,r)=>{let o,a,i;const s={};if(t=t||{},null==e)return t;do{o=Object.getOwnPropertyNames(e),a=o.length;while(a-- >0)i=o[a],r&&!r(i,e,t)||s[i]||(t[i]=e[i],s[i]=!0);e=!1!==n&&en(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},Fn=(e,t,n)=>{e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return-1!==r&&r===n},jn=e=>{if(!e)return null;if(sn(e))return e;let t=e.length;if(!pn(t))return null;const n=new Array(t);while(t-- >0)n[t]=e[t];return n},Vn=(e=>t=>e&&t instanceof e)("undefined"!==typeof Uint8Array&&en(Uint8Array)),Xn=(e,t)=>{const n=e&&e[tn],r=n.call(e);let o;while((o=r.next())&&!o.done){const n=o.value;t.call(e,n[0],n[1])}},Wn=(e,t)=>{let n;const r=[];while(null!==(n=e.exec(t)))r.push(n);return r},qn=on("HTMLFormElement"),Kn=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,t,n){return t.toUpperCase()+n}),zn=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),Qn=on("RegExp"),Hn=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};_n(n,(n,o)=>{let a;!1!==(a=t(n,o,e))&&(r[o]=a||n)}),Object.defineProperties(e,r)},Yn=e=>{Hn(e,(t,n)=>{if(hn(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const r=e[n];hn(r)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))})},Jn=(e,t)=>{const n={},r=e=>{e.forEach(e=>{n[e]=!0})};return sn(e)?r(e):r(String(e).split(t)),n},Gn=()=>{},Zn=(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t;function er(e){return!!(e&&hn(e.append)&&"FormData"===e[nn]&&e[tn])}const tr=e=>{const t=new Array(10),n=(e,r)=>{if(mn(e)){if(t.indexOf(e)>=0)return;if(cn(e))return e;if(!("toJSON"in e)){t[r]=e;const o=sn(e)?[]:{};return _n(e,(e,t)=>{const a=n(e,r+1);!ln(a)&&(o[t]=a)}),t[r]=void 0,o}}return e};return n(e,0)},nr=on("AsyncFunction"),rr=e=>e&&(mn(e)||hn(e))&&hn(e.then)&&hn(e.catch),or=((e,t)=>e?setImmediate:t?((e,t)=>(Dn.addEventListener("message",({source:n,data:r})=>{n===Dn&&r===e&&t.length&&t.shift()()},!1),n=>{t.push(n),Dn.postMessage(e,"*")}))(`axios@${Math.random()}`,[]):e=>setTimeout(e))("function"===typeof setImmediate,hn(Dn.postMessage)),ar="undefined"!==typeof queueMicrotask?queueMicrotask.bind(Dn):"undefined"!==typeof process&&process.nextTick||or,ir=e=>null!=e&&hn(e[tn]);var sr={isArray:sn,isArrayBuffer:un,isBuffer:cn,isFormData:Rn,isArrayBufferView:dn,isString:fn,isNumber:pn,isBoolean:gn,isObject:mn,isPlainObject:vn,isEmptyObject:yn,isReadableStream:Sn,isRequest:Cn,isResponse:Tn,isHeaders:On,isUndefined:ln,isDate:wn,isFile:bn,isBlob:En,isRegExp:Qn,isFunction:hn,isStream:kn,isURLSearchParams:Ln,isTypedArray:Vn,isFileList:An,forEach:_n,merge:Un,extend:Mn,trim:xn,stripBOM:Nn,inherits:$n,toFlatObject:Bn,kindOf:rn,kindOfTest:on,endsWith:Fn,toArray:jn,forEachEntry:Xn,matchAll:Wn,isHTMLForm:qn,hasOwnProperty:zn,hasOwnProp:zn,reduceDescriptors:Hn,freezeMethods:Yn,toObjectSet:Jn,toCamelCase:Kn,noop:Gn,toFiniteNumber:Zn,findKey:Pn,global:Dn,isContextDefined:In,isSpecCompliantForm:er,toJSONObject:tr,isAsyncFn:nr,isThenable:rr,setImmediate:or,asap:ar,isIterable:ir};n(1806);function lr(e,t,n,r,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),o&&(this.response=o,this.status=o.status?o.status:null)}sr.inherits(lr,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:sr.toJSONObject(this.config),code:this.code,status:this.status}}});const cr=lr.prototype,ur={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{ur[e]={value:e}}),Object.defineProperties(lr,ur),Object.defineProperty(cr,"isAxiosError",{value:!0}),lr.from=(e,t,n,r,o,a)=>{const i=Object.create(cr);sr.toFlatObject(e,i,function(e){return e!==Error.prototype},e=>"isAxiosError"!==e);const s=e&&e.message?e.message:"Error",l=null==t&&e?e.code:t;return lr.call(i,s,l,n,r,o),e&&null==i.cause&&Object.defineProperty(i,"cause",{value:e,configurable:!0}),i.name=e&&e.name||"Error",a&&Object.assign(i,a),i};var dr=lr,fr=null;function hr(e){return sr.isPlainObject(e)||sr.isArray(e)}function pr(e){return sr.endsWith(e,"[]")?e.slice(0,-2):e}function mr(e,t,n){return e?e.concat(t).map(function(e,t){return e=pr(e),!n&&t?"["+e+"]":e}).join(n?".":""):t}function gr(e){return sr.isArray(e)&&!e.some(hr)}const vr=sr.toFlatObject(sr,{},null,function(e){return/^is[A-Z]/.test(e)});function yr(e,t,n){if(!sr.isObject(e))throw new TypeError("target must be an object");t=t||new(fr||FormData),n=sr.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(e,t){return!sr.isUndefined(t[e])});const r=n.metaTokens,o=n.visitor||u,a=n.dots,i=n.indexes,s=n.Blob||"undefined"!==typeof Blob&&Blob,l=s&&sr.isSpecCompliantForm(t);if(!sr.isFunction(o))throw new TypeError("visitor must be a function");function c(e){if(null===e)return"";if(sr.isDate(e))return e.toISOString();if(sr.isBoolean(e))return e.toString();if(!l&&sr.isBlob(e))throw new dr("Blob is not supported. Use a Buffer instead.");return sr.isArrayBuffer(e)||sr.isTypedArray(e)?l&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function u(e,n,o){let s=e;if(e&&!o&&"object"===typeof e)if(sr.endsWith(n,"{}"))n=r?n:n.slice(0,-2),e=JSON.stringify(e);else if(sr.isArray(e)&&gr(e)||(sr.isFileList(e)||sr.endsWith(n,"[]"))&&(s=sr.toArray(e)))return n=pr(n),s.forEach(function(e,r){!sr.isUndefined(e)&&null!==e&&t.append(!0===i?mr([n],r,a):null===i?n:n+"[]",c(e))}),!1;return!!hr(e)||(t.append(mr(o,n,a),c(e)),!1)}const d=[],f=Object.assign(vr,{defaultVisitor:u,convertValue:c,isVisitable:hr});function h(e,n){if(!sr.isUndefined(e)){if(-1!==d.indexOf(e))throw Error("Circular reference detected in "+n.join("."));d.push(e),sr.forEach(e,function(e,r){const a=!(sr.isUndefined(e)||null===e)&&o.call(t,e,sr.isString(r)?r.trim():r,n,f);!0===a&&h(e,n?n.concat(r):[r])}),d.pop()}}if(!sr.isObject(e))throw new TypeError("data must be an object");return h(e),t}var wr=yr;function br(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(e){return t[e]})}function Er(e,t){this._pairs=[],e&&wr(e,this,t)}const Ar=Er.prototype;Ar.append=function(e,t){this._pairs.push([e,t])},Ar.toString=function(e){const t=e?function(t){return e.call(this,t,br)}:br;return this._pairs.map(function(e){return t(e[0])+"="+t(e[1])},"").join("&")};var kr=Er;function Rr(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function Lr(e,t,n){if(!t)return e;const r=n&&n.encode||Rr;sr.isFunction(n)&&(n={serialize:n});const o=n&&n.serialize;let a;if(a=o?o(t,n):sr.isURLSearchParams(t)?t.toString():new kr(t,n).toString(r),a){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+a}return e}class Sr{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){sr.forEach(this.handlers,function(t){null!==t&&e(t)})}}var Cr=Sr,Tr={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Or=(n(4603),n(7566),n(8721),"undefined"!==typeof URLSearchParams?URLSearchParams:kr),xr="undefined"!==typeof FormData?FormData:null,_r="undefined"!==typeof Blob?Blob:null,Pr={isBrowser:!0,classes:{URLSearchParams:Or,FormData:xr,Blob:_r},protocols:["http","https","file","blob","url","data"]};const Dr="undefined"!==typeof window&&"undefined"!==typeof document,Ir="object"===typeof navigator&&navigator||void 0,Ur=Dr&&(!Ir||["ReactNative","NativeScript","NS"].indexOf(Ir.product)<0),Mr=(()=>"undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts)(),Nr=Dr&&window.location.href||"http://localhost";var $r={...r,...Pr};function Br(e,t){return wr(e,new $r.classes.URLSearchParams,{visitor:function(e,t,n,r){return $r.isNode&&sr.isBuffer(e)?(this.append(t,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)},...t})}function Fr(e){return sr.matchAll(/\w+|\[(\w*)]/g,e).map(e=>"[]"===e[0]?"":e[1]||e[0])}function jr(e){const t={},n=Object.keys(e);let r;const o=n.length;let a;for(r=0;r<o;r++)a=n[r],t[a]=e[a];return t}function Vr(e){function t(e,n,r,o){let a=e[o++];if("__proto__"===a)return!0;const i=Number.isFinite(+a),s=o>=e.length;if(a=!a&&sr.isArray(r)?r.length:a,s)return sr.hasOwnProp(r,a)?r[a]=[r[a],n]:r[a]=n,!i;r[a]&&sr.isObject(r[a])||(r[a]=[]);const l=t(e,n,r[a],o);return l&&sr.isArray(r[a])&&(r[a]=jr(r[a])),!i}if(sr.isFormData(e)&&sr.isFunction(e.entries)){const n={};return sr.forEachEntry(e,(e,r)=>{t(Fr(e),r,n,0)}),n}return null}var Xr=Vr;function Wr(e,t,n){if(sr.isString(e))try{return(t||JSON.parse)(e),sr.trim(e)}catch(r){if("SyntaxError"!==r.name)throw r}return(n||JSON.stringify)(e)}const qr={transitional:Tr,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const n=t.getContentType()||"",r=n.indexOf("application/json")>-1,o=sr.isObject(e);o&&sr.isHTMLForm(e)&&(e=new FormData(e));const a=sr.isFormData(e);if(a)return r?JSON.stringify(Xr(e)):e;if(sr.isArrayBuffer(e)||sr.isBuffer(e)||sr.isStream(e)||sr.isFile(e)||sr.isBlob(e)||sr.isReadableStream(e))return e;if(sr.isArrayBufferView(e))return e.buffer;if(sr.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let i;if(o){if(n.indexOf("application/x-www-form-urlencoded")>-1)return Br(e,this.formSerializer).toString();if((i=sr.isFileList(e))||n.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return wr(i?{"files[]":e}:e,t&&new t,this.formSerializer)}}return o||r?(t.setContentType("application/json",!1),Wr(e)):e}],transformResponse:[function(e){const t=this.transitional||qr.transitional,n=t&&t.forcedJSONParsing,r="json"===this.responseType;if(sr.isResponse(e)||sr.isReadableStream(e))return e;if(e&&sr.isString(e)&&(n&&!this.responseType||r)){const n=t&&t.silentJSONParsing,a=!n&&r;try{return JSON.parse(e,this.parseReviver)}catch(o){if(a){if("SyntaxError"===o.name)throw dr.from(o,dr.ERR_BAD_RESPONSE,this,null,this.response);throw o}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:$r.classes.FormData,Blob:$r.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};sr.forEach(["delete","get","head","post","put","patch"],e=>{qr.headers[e]={}});var Kr=qr;const zr=sr.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]);var Qr=e=>{const t={};let n,r,o;return e&&e.split("\n").forEach(function(e){o=e.indexOf(":"),n=e.substring(0,o).trim().toLowerCase(),r=e.substring(o+1).trim(),!n||t[n]&&zr[n]||("set-cookie"===n?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)}),t};const Hr=Symbol("internals");function Yr(e){return e&&String(e).trim().toLowerCase()}function Jr(e){return!1===e||null==e?e:sr.isArray(e)?e.map(Jr):String(e)}function Gr(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;while(r=n.exec(e))t[r[1]]=r[2];return t}const Zr=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function eo(e,t,n,r,o){return sr.isFunction(r)?r.call(this,t,n):(o&&(t=n),sr.isString(t)?sr.isString(r)?-1!==t.indexOf(r):sr.isRegExp(r)?r.test(t):void 0:void 0)}function to(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,n)=>t.toUpperCase()+n)}function no(e,t){const n=sr.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+n,{value:function(e,n,o){return this[r].call(this,t,e,n,o)},configurable:!0})})}class ro{constructor(e){e&&this.set(e)}set(e,t,n){const r=this;function o(e,t,n){const o=Yr(t);if(!o)throw new Error("header name must be a non-empty string");const a=sr.findKey(r,o);(!a||void 0===r[a]||!0===n||void 0===n&&!1!==r[a])&&(r[a||t]=Jr(e))}const a=(e,t)=>sr.forEach(e,(e,n)=>o(e,n,t));if(sr.isPlainObject(e)||e instanceof this.constructor)a(e,t);else if(sr.isString(e)&&(e=e.trim())&&!Zr(e))a(Qr(e),t);else if(sr.isObject(e)&&sr.isIterable(e)){let n,r,o={};for(const t of e){if(!sr.isArray(t))throw TypeError("Object iterator must return a key-value pair");o[r=t[0]]=(n=o[r])?sr.isArray(n)?[...n,t[1]]:[n,t[1]]:t[1]}a(o,t)}else null!=e&&o(t,e,n);return this}get(e,t){if(e=Yr(e),e){const n=sr.findKey(this,e);if(n){const e=this[n];if(!t)return e;if(!0===t)return Gr(e);if(sr.isFunction(t))return t.call(this,e,n);if(sr.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Yr(e),e){const n=sr.findKey(this,e);return!(!n||void 0===this[n]||t&&!eo(this,this[n],n,t))}return!1}delete(e,t){const n=this;let r=!1;function o(e){if(e=Yr(e),e){const o=sr.findKey(n,e);!o||t&&!eo(n,n[o],o,t)||(delete n[o],r=!0)}}return sr.isArray(e)?e.forEach(o):o(e),r}clear(e){const t=Object.keys(this);let n=t.length,r=!1;while(n--){const o=t[n];e&&!eo(this,this[o],o,e,!0)||(delete this[o],r=!0)}return r}normalize(e){const t=this,n={};return sr.forEach(this,(r,o)=>{const a=sr.findKey(n,o);if(a)return t[a]=Jr(r),void delete t[o];const i=e?to(o):String(o).trim();i!==o&&delete t[o],t[i]=Jr(r),n[i]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return sr.forEach(this,(n,r)=>{null!=n&&!1!==n&&(t[r]=e&&sr.isArray(n)?n.join(", "):n)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join("\n")}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const n=new this(e);return t.forEach(e=>n.set(e)),n}static accessor(e){const t=this[Hr]=this[Hr]={accessors:{}},n=t.accessors,r=this.prototype;function o(e){const t=Yr(e);n[t]||(no(r,e),n[t]=!0)}return sr.isArray(e)?e.forEach(o):o(e),this}}ro.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),sr.reduceDescriptors(ro.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(e){this[n]=e}}}),sr.freezeMethods(ro);var oo=ro;function ao(e,t){const n=this||Kr,r=t||n,o=oo.from(r.headers);let a=r.data;return sr.forEach(e,function(e){a=e.call(n,a,o.normalize(),t?t.status:void 0)}),o.normalize(),a}function io(e){return!(!e||!e.__CANCEL__)}function so(e,t,n){dr.call(this,null==e?"canceled":e,dr.ERR_CANCELED,t,n),this.name="CanceledError"}sr.inherits(so,dr,{__CANCEL__:!0});var lo=so;function co(e,t,n){const r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(new dr("Request failed with status code "+n.status,[dr.ERR_BAD_REQUEST,dr.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}function uo(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function fo(e,t){e=e||10;const n=new Array(e),r=new Array(e);let o,a=0,i=0;return t=void 0!==t?t:1e3,function(s){const l=Date.now(),c=r[i];o||(o=l),n[a]=s,r[a]=l;let u=i,d=0;while(u!==a)d+=n[u++],u%=e;if(a=(a+1)%e,a===i&&(i=(i+1)%e),l-o<t)return;const f=c&&l-c;return f?Math.round(1e3*d/f):void 0}}var ho=fo;function po(e,t){let n,r,o=0,a=1e3/t;const i=(t,a=Date.now())=>{o=a,n=null,r&&(clearTimeout(r),r=null),e(...t)},s=(...e)=>{const t=Date.now(),s=t-o;s>=a?i(e,t):(n=e,r||(r=setTimeout(()=>{r=null,i(n)},a-s)))},l=()=>n&&i(n);return[s,l]}var mo=po;const go=(e,t,n=3)=>{let r=0;const o=ho(50,250);return mo(n=>{const a=n.loaded,i=n.lengthComputable?n.total:void 0,s=a-r,l=o(s),c=a<=i;r=a;const u={loaded:a,total:i,progress:i?a/i:void 0,bytes:s,rate:l||void 0,estimated:l&&i&&c?(i-a)/l:void 0,event:n,lengthComputable:null!=i,[t?"download":"upload"]:!0};e(u)},n)},vo=(e,t)=>{const n=null!=e;return[r=>t[0]({lengthComputable:n,total:e,loaded:r}),t[1]]},yo=e=>(...t)=>sr.asap(()=>e(...t));n(4979);var wo=$r.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,$r.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL($r.origin),$r.navigator&&/(msie|trident)/i.test($r.navigator.userAgent)):()=>!0,bo=$r.hasStandardBrowserEnv?{write(e,t,n,r,o,a){const i=[e+"="+encodeURIComponent(t)];sr.isNumber(n)&&i.push("expires="+new Date(n).toGMTString()),sr.isString(r)&&i.push("path="+r),sr.isString(o)&&i.push("domain="+o),!0===a&&i.push("secure"),document.cookie=i.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Eo(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function Ao(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function ko(e,t,n){let r=!Eo(t);return e&&(r||0==n)?Ao(e,t):t}const Ro=e=>e instanceof oo?{...e}:e;function Lo(e,t){t=t||{};const n={};function r(e,t,n,r){return sr.isPlainObject(e)&&sr.isPlainObject(t)?sr.merge.call({caseless:r},e,t):sr.isPlainObject(t)?sr.merge({},t):sr.isArray(t)?t.slice():t}function o(e,t,n,o){return sr.isUndefined(t)?sr.isUndefined(e)?void 0:r(void 0,e,n,o):r(e,t,n,o)}function a(e,t){if(!sr.isUndefined(t))return r(void 0,t)}function i(e,t){return sr.isUndefined(t)?sr.isUndefined(e)?void 0:r(void 0,e):r(void 0,t)}function s(n,o,a){return a in t?r(n,o):a in e?r(void 0,n):void 0}const l={url:a,method:a,data:a,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,withXSRFToken:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,beforeRedirect:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:s,headers:(e,t,n)=>o(Ro(e),Ro(t),n,!0)};return sr.forEach(Object.keys({...e,...t}),function(r){const a=l[r]||o,i=a(e[r],t[r],r);sr.isUndefined(i)&&a!==s||(n[r]=i)}),n}var So=e=>{const t=Lo({},e);let{data:n,withXSRFToken:r,xsrfHeaderName:o,xsrfCookieName:a,headers:i,auth:s}=t;if(t.headers=i=oo.from(i),t.url=Lr(ko(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),s&&i.set("Authorization","Basic "+btoa((s.username||"")+":"+(s.password?unescape(encodeURIComponent(s.password)):""))),sr.isFormData(n))if($r.hasStandardBrowserEnv||$r.hasStandardBrowserWebWorkerEnv)i.setContentType(void 0);else if(sr.isFunction(n.getHeaders)){const e=n.getHeaders(),t=["content-type","content-length"];Object.entries(e).forEach(([e,n])=>{t.includes(e.toLowerCase())&&i.set(e,n)})}if($r.hasStandardBrowserEnv&&(r&&sr.isFunction(r)&&(r=r(t)),r||!1!==r&&wo(t.url))){const e=o&&a&&bo.read(a);e&&i.set(o,e)}return t};const Co="undefined"!==typeof XMLHttpRequest;var To=Co&&function(e){return new Promise(function(t,n){const r=So(e);let o=r.data;const a=oo.from(r.headers).normalize();let i,s,l,c,u,{responseType:d,onUploadProgress:f,onDownloadProgress:h}=r;function p(){c&&c(),u&&u(),r.cancelToken&&r.cancelToken.unsubscribe(i),r.signal&&r.signal.removeEventListener("abort",i)}let m=new XMLHttpRequest;function g(){if(!m)return;const r=oo.from("getAllResponseHeaders"in m&&m.getAllResponseHeaders()),o=d&&"text"!==d&&"json"!==d?m.response:m.responseText,a={data:o,status:m.status,statusText:m.statusText,headers:r,config:e,request:m};co(function(e){t(e),p()},function(e){n(e),p()},a),m=null}m.open(r.method.toUpperCase(),r.url,!0),m.timeout=r.timeout,"onloadend"in m?m.onloadend=g:m.onreadystatechange=function(){m&&4===m.readyState&&(0!==m.status||m.responseURL&&0===m.responseURL.indexOf("file:"))&&setTimeout(g)},m.onabort=function(){m&&(n(new dr("Request aborted",dr.ECONNABORTED,e,m)),m=null)},m.onerror=function(t){const r=t&&t.message?t.message:"Network Error",o=new dr(r,dr.ERR_NETWORK,e,m);o.event=t||null,n(o),m=null},m.ontimeout=function(){let t=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const o=r.transitional||Tr;r.timeoutErrorMessage&&(t=r.timeoutErrorMessage),n(new dr(t,o.clarifyTimeoutError?dr.ETIMEDOUT:dr.ECONNABORTED,e,m)),m=null},void 0===o&&a.setContentType(null),"setRequestHeader"in m&&sr.forEach(a.toJSON(),function(e,t){m.setRequestHeader(t,e)}),sr.isUndefined(r.withCredentials)||(m.withCredentials=!!r.withCredentials),d&&"json"!==d&&(m.responseType=r.responseType),h&&([l,u]=go(h,!0),m.addEventListener("progress",l)),f&&m.upload&&([s,c]=go(f),m.upload.addEventListener("progress",s),m.upload.addEventListener("loadend",c)),(r.cancelToken||r.signal)&&(i=t=>{m&&(n(!t||t.type?new lo(null,e,m):t),m.abort(),m=null)},r.cancelToken&&r.cancelToken.subscribe(i),r.signal&&(r.signal.aborted?i():r.signal.addEventListener("abort",i)));const v=uo(r.url);v&&-1===$r.protocols.indexOf(v)?n(new dr("Unsupported protocol "+v+":",dr.ERR_BAD_REQUEST,e)):m.send(o||null)})};const Oo=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let n,r=new AbortController;const o=function(e){if(!n){n=!0,i();const t=e instanceof Error?e:this.reason;r.abort(t instanceof dr?t:new lo(t instanceof Error?t.message:t))}};let a=t&&setTimeout(()=>{a=null,o(new dr(`timeout ${t} of ms exceeded`,dr.ETIMEDOUT))},t);const i=()=>{e&&(a&&clearTimeout(a),a=null,e.forEach(e=>{e.unsubscribe?e.unsubscribe(o):e.removeEventListener("abort",o)}),e=null)};e.forEach(e=>e.addEventListener("abort",o));const{signal:s}=r;return s.unsubscribe=()=>sr.asap(i),s}};var xo=Oo;const _o=function*(e,t){let n=e.byteLength;if(!t||n<t)return void(yield e);let r,o=0;while(o<n)r=o+t,yield e.slice(o,r),o=r},Po=async function*(e,t){for await(const n of Do(e))yield*_o(n,t)},Do=async function*(e){if(e[Symbol.asyncIterator])return void(yield*e);const t=e.getReader();try{for(;;){const{done:e,value:n}=await t.read();if(e)break;yield n}}finally{await t.cancel()}},Io=(e,t,n,r)=>{const o=Po(e,t);let a,i=0,s=e=>{a||(a=!0,r&&r(e))};return new ReadableStream({async pull(e){try{const{done:t,value:r}=await o.next();if(t)return s(),void e.close();let a=r.byteLength;if(n){let e=i+=a;n(e)}e.enqueue(new Uint8Array(r))}catch(t){throw s(t),t}},cancel(e){return s(e),o.return()}},{highWaterMark:2})},Uo=65536,{isFunction:Mo}=sr,No=(({Request:e,Response:t})=>({Request:e,Response:t}))(sr.global),{ReadableStream:$o,TextEncoder:Bo}=sr.global,Fo=(e,...t)=>{try{return!!e(...t)}catch(n){return!1}},jo=e=>{e=sr.merge.call({skipUndefined:!0},No,e);const{fetch:t,Request:n,Response:r}=e,o=t?Mo(t):"function"===typeof fetch,a=Mo(n),i=Mo(r);if(!o)return!1;const s=o&&Mo($o),l=o&&("function"===typeof Bo?(e=>t=>e.encode(t))(new Bo):async e=>new Uint8Array(await new n(e).arrayBuffer())),c=a&&s&&Fo(()=>{let e=!1;const t=new n($r.origin,{body:new $o,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),u=i&&s&&Fo(()=>sr.isReadableStream(new r("").body)),d={stream:u&&(e=>e.body)};o&&(()=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!d[e]&&(d[e]=(t,n)=>{let r=t&&t[e];if(r)return r.call(t);throw new dr(`Response type '${e}' is not supported`,dr.ERR_NOT_SUPPORT,n)})})})();const f=async e=>{if(null==e)return 0;if(sr.isBlob(e))return e.size;if(sr.isSpecCompliantForm(e)){const t=new n($r.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return sr.isArrayBufferView(e)||sr.isArrayBuffer(e)?e.byteLength:(sr.isURLSearchParams(e)&&(e+=""),sr.isString(e)?(await l(e)).byteLength:void 0)},h=async(e,t)=>{const n=sr.toFiniteNumber(e.getContentLength());return null==n?f(t):n};return async e=>{let{url:o,method:i,data:s,signal:l,cancelToken:f,timeout:p,onDownloadProgress:m,onUploadProgress:g,responseType:v,headers:y,withCredentials:w="same-origin",fetchOptions:b}=So(e),E=t||fetch;v=v?(v+"").toLowerCase():"text";let A=xo([l,f&&f.toAbortSignal()],p),k=null;const R=A&&A.unsubscribe&&(()=>{A.unsubscribe()});let L;try{if(g&&c&&"get"!==i&&"head"!==i&&0!==(L=await h(y,s))){let e,t=new n(o,{method:"POST",body:s,duplex:"half"});if(sr.isFormData(s)&&(e=t.headers.get("content-type"))&&y.setContentType(e),t.body){const[e,n]=vo(L,go(yo(g)));s=Io(t.body,Uo,e,n)}}sr.isString(w)||(w=w?"include":"omit");const t=a&&"credentials"in n.prototype,l={...b,signal:A,method:i.toUpperCase(),headers:y.normalize().toJSON(),body:s,duplex:"half",credentials:t?w:void 0};k=a&&new n(o,l);let f=await(a?E(k,b):E(o,l));const p=u&&("stream"===v||"response"===v);if(u&&(m||p&&R)){const e={};["status","statusText","headers"].forEach(t=>{e[t]=f[t]});const t=sr.toFiniteNumber(f.headers.get("content-length")),[n,o]=m&&vo(t,go(yo(m),!0))||[];f=new r(Io(f.body,Uo,n,()=>{o&&o(),R&&R()}),e)}v=v||"text";let S=await d[sr.findKey(d,v)||"text"](f,e);return!p&&R&&R(),await new Promise((t,n)=>{co(t,n,{data:S,headers:oo.from(f.headers),status:f.status,statusText:f.statusText,config:e,request:k})})}catch(S){if(R&&R(),S&&"TypeError"===S.name&&/Load failed|fetch/i.test(S.message))throw Object.assign(new dr("Network Error",dr.ERR_NETWORK,e,k),{cause:S.cause||S});throw dr.from(S,S&&S.code,e,k)}}},Vo=new Map,Xo=e=>{let t=e?e.env:{};const{fetch:n,Request:r,Response:o}=t,a=[r,o,n];let i,s,l=a.length,c=l,u=Vo;while(c--)i=a[c],s=u.get(i),void 0===s&&u.set(i,s=c?new Map:jo(t)),u=s;return s};Xo();const Wo={http:fr,xhr:To,fetch:{get:Xo}};sr.forEach(Wo,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(n){}Object.defineProperty(e,"adapterName",{value:t})}});const qo=e=>`- ${e}`,Ko=e=>sr.isFunction(e)||null===e||!1===e;var zo={getAdapter:(e,t)=>{e=sr.isArray(e)?e:[e];const{length:n}=e;let r,o;const a={};for(let i=0;i<n;i++){let n;if(r=e[i],o=r,!Ko(r)&&(o=Wo[(n=String(r)).toLowerCase()],void 0===o))throw new dr(`Unknown adapter '${n}'`);if(o&&(sr.isFunction(o)||(o=o.get(t))))break;a[n||"#"+i]=o}if(!o){const e=Object.entries(a).map(([e,t])=>`adapter ${e} `+(!1===t?"is not supported by the environment":"is not available in the build"));let t=n?e.length>1?"since :\n"+e.map(qo).join("\n"):" "+qo(e[0]):"as no adapter specified";throw new dr("There is no suitable adapter to dispatch the request "+t,"ERR_NOT_SUPPORT")}return o},adapters:Wo};function Qo(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new lo(null,e)}function Ho(e){Qo(e),e.headers=oo.from(e.headers),e.data=ao.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);const t=zo.getAdapter(e.adapter||Kr.adapter,e);return t(e).then(function(t){return Qo(e),t.data=ao.call(e,e.transformResponse,t),t.headers=oo.from(t.headers),t},function(t){return io(t)||(Qo(e),t&&t.response&&(t.response.data=ao.call(e,e.transformResponse,t.response),t.response.headers=oo.from(t.response.headers))),Promise.reject(t)})}const Yo="1.12.2",Jo={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Jo[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});const Go={};function Zo(e,t,n){if("object"!==typeof e)throw new dr("options must be an object",dr.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let o=r.length;while(o-- >0){const a=r[o],i=t[a];if(i){const t=e[a],n=void 0===t||i(t,a,e);if(!0!==n)throw new dr("option "+a+" must be "+n,dr.ERR_BAD_OPTION_VALUE);continue}if(!0!==n)throw new dr("Unknown option "+a,dr.ERR_BAD_OPTION)}}Jo.transitional=function(e,t,n){function r(e,t){return"[Axios v"+Yo+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}return(n,o,a)=>{if(!1===e)throw new dr(r(o," has been removed"+(t?" in "+t:"")),dr.ERR_DEPRECATED);return t&&!Go[o]&&(Go[o]=!0,console.warn(r(o," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,o,a)}},Jo.spelling=function(e){return(t,n)=>(console.warn(`${n} is likely a misspelling of ${e}`),!0)};var ea={assertOptions:Zo,validators:Jo};const ta=ea.validators;class na{constructor(e){this.defaults=e||{},this.interceptors={request:new Cr,response:new Cr}}async request(e,t){try{return await this._request(e,t)}catch(n){if(n instanceof Error){let e={};Error.captureStackTrace?Error.captureStackTrace(e):e=new Error;const t=e.stack?e.stack.replace(/^.+\n/,""):"";try{n.stack?t&&!String(n.stack).endsWith(t.replace(/^.+\n.+\n/,""))&&(n.stack+="\n"+t):n.stack=t}catch(r){}}throw n}}_request(e,t){"string"===typeof e?(t=t||{},t.url=e):t=e||{},t=Lo(this.defaults,t);const{transitional:n,paramsSerializer:r,headers:o}=t;void 0!==n&&ea.assertOptions(n,{silentJSONParsing:ta.transitional(ta.boolean),forcedJSONParsing:ta.transitional(ta.boolean),clarifyTimeoutError:ta.transitional(ta.boolean)},!1),null!=r&&(sr.isFunction(r)?t.paramsSerializer={serialize:r}:ea.assertOptions(r,{encode:ta.function,serialize:ta.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),ea.assertOptions(t,{baseUrl:ta.spelling("baseURL"),withXsrfToken:ta.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let a=o&&sr.merge(o.common,o[t.method]);o&&sr.forEach(["delete","get","head","post","put","patch","common"],e=>{delete o[e]}),t.headers=oo.concat(a,o);const i=[];let s=!0;this.interceptors.request.forEach(function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(s=s&&e.synchronous,i.unshift(e.fulfilled,e.rejected))});const l=[];let c;this.interceptors.response.forEach(function(e){l.push(e.fulfilled,e.rejected)});let u,d=0;if(!s){const e=[Ho.bind(this),void 0];e.unshift(...i),e.push(...l),u=e.length,c=Promise.resolve(t);while(d<u)c=c.then(e[d++],e[d++]);return c}u=i.length;let f=t;while(d<u){const e=i[d++],t=i[d++];try{f=e(f)}catch(h){t.call(this,h);break}}try{c=Ho.call(this,f)}catch(h){return Promise.reject(h)}d=0,u=l.length;while(d<u)c=c.then(l[d++],l[d++]);return c}getUri(e){e=Lo(this.defaults,e);const t=ko(e.baseURL,e.url,e.allowAbsoluteUrls);return Lr(t,e.params,e.paramsSerializer)}}sr.forEach(["delete","get","head","options"],function(e){na.prototype[e]=function(t,n){return this.request(Lo(n||{},{method:e,url:t,data:(n||{}).data}))}}),sr.forEach(["post","put","patch"],function(e){function t(t){return function(n,r,o){return this.request(Lo(o||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}na.prototype[e]=t(),na.prototype[e+"Form"]=t(!0)});var ra=na;class oa{constructor(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(e){t=e});const n=this;this.promise.then(e=>{if(!n._listeners)return;let t=n._listeners.length;while(t-- >0)n._listeners[t](e);n._listeners=null}),this.promise.then=e=>{let t;const r=new Promise(e=>{n.subscribe(e),t=e}).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e(function(e,r,o){n.reason||(n.reason=new lo(e,r,o),t(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;const t=new oa(function(t){e=t});return{token:t,cancel:e}}}var aa=oa;function ia(e){return function(t){return e.apply(null,t)}}function sa(e){return sr.isObject(e)&&!0===e.isAxiosError}const la={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(la).forEach(([e,t])=>{la[t]=e});var ca=la;function ua(e){const t=new ra(e),n=Gt(ra.prototype.request,t);return sr.extend(n,ra.prototype,t,{allOwnKeys:!0}),sr.extend(n,t,null,{allOwnKeys:!0}),n.create=function(t){return ua(Lo(e,t))},n}const da=ua(Kr);da.Axios=ra,da.CanceledError=lo,da.CancelToken=aa,da.isCancel=io,da.VERSION=Yo,da.toFormData=wr,da.AxiosError=dr,da.Cancel=da.CanceledError,da.all=function(e){return Promise.all(e)},da.spread=ia,da.isAxiosError=sa,da.mergeConfig=Lo,da.AxiosHeaders=oo,da.formToJSON=e=>Xr(sr.isHTMLForm(e)?new FormData(e):e),da.getAdapter=zo.getAdapter,da.HttpStatusCode=ca,da.default=da;var fa=da,ha=n(2169);const pa={baseURL:ha.A.API_BASE_URL||"http://localhost:5097",timeout:1e4},ma=fa.create(pa);ma.interceptors.request.use(e=>e,e=>Promise.reject(e)),ma.interceptors.response.use(e=>e,e=>(console.error("API请求错误:",e),Promise.reject(e)));const ga=async()=>{try{const e=await ma.get("/api/Events");return e.data}catch(e){return{success:!1,data:null,message:e.response?.data?.message||"获取事件列表失败"}}},va=async e=>{try{const t=await ma.get(`/api/Events/${e}`);return t.data}catch(t){return 404===t.response?.status?{success:!1,data:null,message:"事件不存在"}:{success:!1,data:null,message:t.response?.data?.message||"获取事件详情失败"}}},ya=async e=>{try{const t=await ma.post("/api/Events",e);return t.data}catch(t){return{success:!1,data:null,message:t.response?.data?.message||"创建事件失败"}}},wa=async(e,t)=>{try{const n=await ma.put(`/api/Events/${e}`,t);return n.data}catch(n){return 404===n.response?.status?{success:!1,data:null,message:"事件不存在"}:{success:!1,data:null,message:n.response?.data?.message||"更新事件失败"}}},ba=async e=>{try{const t=await ma.delete(`/api/Events/${e}`);return t.data}catch(t){return 404===t.response?.status?{success:!1,data:null,message:"事件不存在"}:{success:!1,data:null,message:t.response?.data?.message||"删除事件失败"}}},Ea=async e=>{try{const t=new FormData;e.forEach(e=>{t.append("files",e)});const n=await ma.post("/api/Files/upload-multiple",t,{headers:{"Content-Type":"multipart/form-data"}});return n.data}catch(t){return{success:!1,data:null,message:t.response?.data?.message||"批量上传失败"}}},Aa=(e,t,n)=>{n||(n=!1);const r=ha.A.API_BASE_URL||"http://localhost:5097";return`${r}/api/Files/download?id=${encodeURIComponent(e)}&fileName=${encodeURIComponent(t)}&thumbnail=${n}`},ka=async()=>{try{const e=await ga();if(!e.success)return{success:!1,data:null,message:"获取统计数据失败"};const t=e.data.flatMap(e=>e.events),n=t.length,r=t.reduce((e,t)=>e+(t.media?.images?.length||0),0),o=t.reduce((e,t)=>e+(t.media?.videos?.length||0),0),a=t.reduce((e,t)=>e+(t.media?.audios?.length||0),0);return{success:!0,data:{totalEvents:n,totalPhotos:r,totalVideos:o,totalAudios:a},message:"获取统计数据成功"}}catch(e){return{success:!1,data:null,message:"获取统计数据失败"}}},Ra={key:0,class:"loading-placeholder"},La={key:1,class:"error-placeholder"},Sa=["src","alt"];function Ca(e,t,n,r,a,i){return(0,o.uX)(),(0,o.CE)("div",{class:(0,ct.C4)(["lazy-image-container",{loaded:r.imageLoaded,error:r.imageError,small:n.small}]),ref:"containerRef"},[r.imageLoaded||r.imageError?r.imageError?((0,o.uX)(),(0,o.CE)("div",La,[t[4]||(t[4]=(0,o.Lk)("span",{class:"error-icon"},"📷",-1)),t[5]||(t[5]=(0,o.Lk)("span",{class:"error-text"},"加载失败",-1)),r.retryCount<r.maxRetries?((0,o.uX)(),(0,o.CE)("button",{key:0,class:"retry-button",onClick:t[0]||(t[0]=(...e)=>r.retryLoad&&r.retryLoad(...e))},"重试")):(0,o.Q3)("",!0)])):(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("div",Ra,[...t[3]||(t[3]=[(0,o.Lk)("div",{class:"loading-spinner"},null,-1),(0,o.Lk)("span",{class:"loading-text"},"加载中...",-1)])])),r.shouldLoad?((0,o.uX)(),(0,o.CE)("img",{key:2,src:r.optimizedSrc,alt:n.alt,onLoad:t[1]||(t[1]=(...e)=>r.onImageLoad&&r.onImageLoad(...e)),onError:t[2]||(t[2]=(...e)=>r.onImageError&&r.onImageError(...e)),class:"lazy-image",style:(0,ct.Tr)({opacity:r.imageLoaded?1:0}),loading:"lazy"},null,44,Sa)):(0,o.Q3)("",!0)],2)}class Ta{constructor(){this.loadingStats={totalImages:0,loadedImages:0,failedImages:0,averageLoadTime:0,loadTimes:[]},this.loadingEvents=[],this.isEnabled=!1}startMonitoring(e){if(!this.isEnabled)return null;const t=performance.now(),n=`${e}-${t}`;return this.loadingEvents.push({id:n,src:e,startTime:t,endTime:null,success:null}),this.loadingStats.totalImages++,n}endMonitoring(e,t=!0){if(!this.isEnabled||!e)return;const n=this.loadingEvents.find(t=>t.id===e);if(!n)return;const r=performance.now(),o=r-n.startTime;n.endTime=r,n.success=t,t?(this.loadingStats.loadedImages++,this.loadingStats.loadTimes.push(o),this.updateAverageLoadTime()):this.loadingStats.failedImages++,this.isEnabled&&console.debug(`图片加载${t?"成功":"失败"}:`,{src:n.src,loadTime:`${o.toFixed(2)}ms`,stats:this.getStats()})}updateAverageLoadTime(){if(this.loadingStats.loadTimes.length>0){const e=this.loadingStats.loadTimes.reduce((e,t)=>e+t,0);this.loadingStats.averageLoadTime=e/this.loadingStats.loadTimes.length}}getStats(){const e=this.loadingStats.totalImages>0?(this.loadingStats.loadedImages/this.loadingStats.totalImages*100).toFixed(1):0;return{...this.loadingStats,successRate:`${e}%`,averageLoadTime:`${this.loadingStats.averageLoadTime.toFixed(2)}ms`}}getPerformanceRecommendations(){const e=this.getStats(),t=[];parseFloat(e.successRate)<90&&t.push("图片加载成功率较低，请检查网络连接或图片URL"),this.loadingStats.averageLoadTime>2e3&&t.push("图片加载时间较长，建议优化图片尺寸或使用CDN"),this.loadingStats.failedImages>5&&t.push("失败的图片数量较多，请检查图片资源的可用性");const n=this.loadingEvents.filter(e=>e.success&&e.endTime-e.startTime>3e3);return n.length>0&&t.push(`发现${n.length}张加载较慢的图片，建议优化这些图片`),t}reset(){this.loadingStats={totalImages:0,loadedImages:0,failedImages:0,averageLoadTime:0,loadTimes:[]},this.loadingEvents=[]}exportReport(){return{timestamp:(new Date).toISOString(),stats:this.getStats(),recommendations:this.getPerformanceRecommendations(),events:this.loadingEvents.slice(-20)}}}const Oa=new Ta;class xa{constructor(){this.networkSpeed="fast",this.deviceType=this.detectDeviceType(),this.connectionType=this.detectConnectionType()}detectDeviceType(){const e=navigator.userAgent.toLowerCase();return/mobile|android|iphone|ipad|tablet/.test(e)?"mobile":"desktop"}detectConnectionType(){if("connection"in navigator){const e=navigator.connection||navigator.mozConnection||navigator.webkitConnection;if(e){const t=e.effectiveType;switch(t){case"slow-2g":case"2g":return"slow";case"3g":return"medium";case"4g":default:return"fast"}}}return"fast"}getRecommendedQuality(){return"slow"===this.connectionType||"mobile"===this.deviceType?"low":"medium"===this.connectionType?"medium":"high"}getLoadingStrategy(){const e=this.getRecommendedQuality();return{quality:e,threshold:"low"===e?100:"medium"===e?200:300,preloadCount:"low"===e?3:"medium"===e?6:10,enablePreload:"low"!==e}}}const _a=new xa;class Pa{constructor(){this.supportedFormats=new Map,this.checkFormats()}async checkFormats(){const e=[{name:"webp",data:"data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA"},{name:"avif",data:"data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgABogQEAwgMg8f8D///8WfhwB8+ErK42A="},{name:"jpeg2000",data:"data:image/jp2;base64,/0//UQAyAAAAAAABAAAAAgAAAAAAAAAAAAAABAAAAAQAAAAAAAAAAAAEBwEBBwEBBwEBBwEB"}];for(const n of e)try{const e=await this.testFormat(n.data);this.supportedFormats.set(n.name,e)}catch(t){this.supportedFormats.set(n.name,!1)}}testFormat(e){return new Promise(t=>{const n=new Image;n.onload=()=>t(1===n.width&&1===n.height),n.onerror=()=>t(!1),n.src=e})}getBestFormat(e){const t=new URL(e,window.location.origin),n=t.pathname.toLowerCase();return n.includes(".webp")||n.includes(".avif")?e:this.supportedFormats.get("avif")?this.convertUrlFormat(e,"avif"):this.supportedFormats.get("webp")?this.convertUrlFormat(e,"webp"):e}convertUrlFormat(e,t){const n=new URL(e,window.location.origin);return n.searchParams.set("format",t),n.toString()}supports(e){return this.supportedFormats.get(e)||!1}}const Da=new Pa;class Ia{constructor(){this.breakpoints={xs:480,sm:768,md:1024,lg:1200,xl:1440}}getCurrentBreakpoint(){const e=window.innerWidth;return e<this.breakpoints.xs?"xs":e<this.breakpoints.sm?"sm":e<this.breakpoints.md?"md":e<this.breakpoints.lg?"lg":"xl"}getSuggestedSize(e,t){const n=window.devicePixelRatio||1,r=this.getCurrentBreakpoint();let o=1;switch(r){case"xs":o=.8;break;case"sm":o=.9;break;case"md":o=1;break;case"lg":o=1.1;break;case"xl":o=1.2;break}return{width:Math.ceil(e*n*o),height:Math.ceil(t*n*o),dpr:n,breakpoint:r}}generateSrcSet(e,t=[1,1.5,2,3]){return t.map(t=>{const n=this.addSizeParams(e,t);return`${n} ${t}x`}).join(", ")}addSizeParams(e,t=1){const n=new URL(e,window.location.origin);return n.searchParams.set("scale",t.toString()),n.toString()}}new Ia;class Ua{constructor(){this.qualitySettings={high:{quality:90,maxWidth:2048,maxHeight:2048},medium:{quality:75,maxWidth:1024,maxHeight:1024},low:{quality:60,maxWidth:512,maxHeight:512}}}getRecommendedQuality(){if("connection"in navigator){const e=navigator.connection||navigator.mozConnection||navigator.webkitConnection;if(e)switch(e.effectiveType){case"slow-2g":case"2g":return"low";case"3g":return"medium";case"4g":default:return"high"}}const e=/Mobi|Android/i.test(navigator.userAgent);return e?"medium":"high"}applyQualityToUrl(e,t=null){t||(t=this.getRecommendedQuality());const n=this.qualitySettings[t];if(!n)return e;const r=new URL(e,window.location.origin);return r.searchParams.set("q",n.quality.toString()),r.searchParams.set("maxw",n.maxWidth.toString()),r.searchParams.set("maxh",n.maxHeight.toString()),r.toString()}}const Ma=new Ua,Na=(e,t={})=>{let n=e;if(!1!==t.formatOptimization&&(n=Da.getBestFormat(n)),(t.quality||!1!==t.qualityOptimization)&&(n=Ma.applyQualityToUrl(n,t.quality)),t.width&&t.height){const e=new URL(n,window.location.origin);e.searchParams.set("w",t.width.toString()),e.searchParams.set("h",t.height.toString()),n=e.toString()}return n};var $a={name:"LazyImage",props:{src:{type:String,required:!0},alt:{type:String,default:""},small:{type:Boolean,default:!1},threshold:{type:Number,default:200},preload:{type:Boolean,default:!1},priority:{type:String,default:"normal",validator:e=>["high","normal","low"].includes(e)}},setup(e){const t=(0,a.KR)(null),n=(0,a.KR)(!1),r=(0,a.KR)(!1),i=(0,a.KR)(!1),s=(0,a.KR)(0),l=2,c=(0,a.KR)(e.src);let u=null,d=null;const f=(0,o.EW)(()=>{const t={quality:"low"===e.priority?"low":"high"===e.priority?"high":"medium",formatOptimization:!0,qualityOptimization:!0};return Na(c.value,t)}),h=()=>{window.IntersectionObserver?(u=new IntersectionObserver(t=>{t.forEach(t=>{if(t.isIntersecting||t.intersectionRatio>0){const r="high"===e.priority?0:"normal"===e.priority?100:300;setTimeout(()=>{n.value=!0,d=Oa.startMonitoring(e.src)},r),u&&(u.unobserve(t.target),u=null)}})},{rootMargin:`${e.threshold}px`,threshold:.01}),t.value&&u.observe(t.value)):n.value=!0},p=()=>{r.value=!0,i.value=!1,d&&Oa.endMonitoring(d,!0)},m=()=>{s.value++,s.value<=l?setTimeout(()=>{c.value=`${e.src}?retry=${s.value}&t=${Date.now()}`},1e3*s.value):(r.value=!1,i.value=!0,d&&Oa.endMonitoring(d,!1))};(0,o.sV)(()=>{e.preload?(n.value=!0,d=Oa.startMonitoring(e.src)):h()}),(0,o.hi)(()=>{u&&u.disconnect()});const g=()=>{i.value=!1,r.value=!1,d=Oa.startMonitoring(e.src),c.value=`${e.src}?retry=${s.value}&t=${Date.now()}`};return{containerRef:t,shouldLoad:n,imageLoaded:r,imageError:i,retryCount:s,maxRetries:l,currentSrc:c,optimizedSrc:f,onImageLoad:p,onImageError:m,retryLoad:g}}},Ba=n(1241);const Fa=(0,Ba.A)($a,[["render",Ca],["__scopeId","data-v-58edb738"]]);var ja=Fa;const Va={key:0,class:"performance-panel"},Xa={class:"panel-header"},Wa={class:"panel-content"},qa={class:"stat-row"},Ka={class:"stat-row"},za={class:"stat-row"},Qa={class:"stat-row"},Ha={class:"stat-row"},Ya={key:0,class:"recommendations"};function Ja(e,t,n,r,a,i){return(0,o.uX)(),(0,o.CE)(o.FK,null,[r.showPanel?((0,o.uX)(),(0,o.CE)("div",Va,[(0,o.Lk)("div",Xa,[t[2]||(t[2]=(0,o.Lk)("h4",null,"图片加载性能",-1)),(0,o.Lk)("button",{class:"close-btn",onClick:t[0]||(t[0]=(...e)=>r.closePanel&&r.closePanel(...e))},"×")]),(0,o.Lk)("div",Wa,[(0,o.Lk)("div",qa,[t[3]||(t[3]=(0,o.Lk)("span",null,"总计:",-1)),(0,o.Lk)("span",null,(0,ct.v_)(r.stats.totalImages),1)]),(0,o.Lk)("div",Ka,[t[4]||(t[4]=(0,o.Lk)("span",null,"成功:",-1)),(0,o.Lk)("span",null,(0,ct.v_)(r.stats.loadedImages),1)]),(0,o.Lk)("div",za,[t[5]||(t[5]=(0,o.Lk)("span",null,"失败:",-1)),(0,o.Lk)("span",null,(0,ct.v_)(r.stats.failedImages),1)]),(0,o.Lk)("div",Qa,[t[6]||(t[6]=(0,o.Lk)("span",null,"成功率:",-1)),(0,o.Lk)("span",null,(0,ct.v_)(r.stats.successRate),1)]),(0,o.Lk)("div",Ha,[t[7]||(t[7]=(0,o.Lk)("span",null,"平均耗时:",-1)),(0,o.Lk)("span",null,(0,ct.v_)(r.stats.averageLoadTime),1)]),r.recommendations.length>0?((0,o.uX)(),(0,o.CE)("div",Ya,[t[8]||(t[8]=(0,o.Lk)("h5",null,"建议:",-1)),(0,o.Lk)("ul",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(r.recommendations,(e,t)=>((0,o.uX)(),(0,o.CE)("li",{key:t},(0,ct.v_)(e),1))),128))])])):(0,o.Q3)("",!0)])])):(0,o.Q3)("",!0),r.isDevelopment&&!r.showPanel?((0,o.uX)(),(0,o.CE)("button",{key:1,class:"performance-toggle",onClick:t[1]||(t[1]=(...e)=>r.togglePanel&&r.togglePanel(...e))}," 📊 ")):(0,o.Q3)("",!0)],64)}var Ga={name:"PerformancePanel",setup(){const e=(0,a.KR)(!1),t=(0,a.KR)({}),n=(0,a.KR)([]),r=!1;let i=null;const s=()=>{e.value=!e.value,e.value?(c(),u()):d()},l=()=>{e.value=!1,d()},c=()=>{t.value=Oa.getStats(),n.value=Oa.getPerformanceRecommendations()},u=()=>{i=setInterval(c,2e3)},d=()=>{i&&(clearInterval(i),i=null)};return(0,o.sV)(()=>{r&&c()}),(0,o.hi)(()=>{d()}),{showPanel:e,stats:t,recommendations:n,isDevelopment:r,togglePanel:s,closePanel:l}}};const Za=(0,Ba.A)(Ga,[["render",Ja],["__scopeId","data-v-393cda0c"]]);var ei=Za;class ti{constructor(){this.cache=new Map,this.loadingQueue=new Set,this.maxCacheSize=50}preloadImage(e){return new Promise((t,n)=>{if(this.cache.has(e))return void t(this.cache.get(e));if(this.loadingQueue.has(e)){const r=()=>{this.cache.has(e)?t(this.cache.get(e)):this.loadingQueue.has(e)?setTimeout(r,100):n(new Error("Image load failed"))};return void r()}this.loadingQueue.add(e);const r=new Image;r.onload=()=>{this.loadingQueue.delete(e),this.addToCache(e,r),t(r)},r.onerror=()=>{this.loadingQueue.delete(e),n(new Error("Image load failed"))},r.src=e})}addToCache(e,t){if(this.cache.size>=this.maxCacheSize){const e=this.cache.keys().next().value;this.cache.delete(e)}this.cache.set(e,t)}isCached(e){return this.cache.has(e)}clearCache(){this.cache.clear(),this.loadingQueue.clear()}getCacheStats(){return{cacheSize:this.cache.size,loadingCount:this.loadingQueue.size,maxCacheSize:this.maxCacheSize}}}const ni=new ti,ri=(e,t=10,n)=>{if(!n)return void console.warn("getMediaUrl函数未提供，跳过图片预加载");const r=[];e.slice(0,Math.ceil(t/2)).forEach(e=>{if(e.media?.images?.length>0){const t=e.media.images[0];t?.fileName&&r.push({src:n(e.id,t.fileName,!0),priority:"high"})}}),e.forEach(e=>{e.media?.images?.length>1&&e.media.images.slice(1,3).forEach(o=>{o?.fileName&&r.length<t&&r.push({src:n(e.id,o.fileName,!0),priority:"low"})})});const o=r.filter(e=>"high"===e.priority),a=r.filter(e=>"low"===e.priority);o.forEach(e=>{ni.preloadImage(e.src).catch(t=>{console.warn("预加载图片失败:",e.src,t)})}),setTimeout(()=>{a.forEach(e=>{ni.preloadImage(e.src).catch(t=>{console.warn("预加载图片失败:",e.src,t)})})},1e3)};var oi={name:"HomePage",components:{LazyImage:ja,PerformancePanel:ei},setup(){const e=st(),t=lt(),n=(0,a.KR)(Jt()("2025-05-09")),r=(0,o.EW)(()=>{const e=Jt()(),t=n.value;if(e.isBefore(t))return"即将出生";const r=e.diff(t,"month");if(r<12){const n=t.add(r,"month"),o=e.diff(n,"day");if(0===r){const n=e.diff(t,"day");return`${n}天`}return`${r}个月${o>0?` ${o}天`:""}`}{const e=Math.floor(r/12),t=r%12;return`${e}岁${t>0?` ${t}个月`:""}`}}),i=()=>{try{const e=localStorage.getItem("baby-log-sort-ascending");return null!==e&&JSON.parse(e)}catch(u){return console.warn("获取排序偏好失败:",u),!1}},s=e=>{try{localStorage.setItem("baby-log-sort-ascending",JSON.stringify(e))}catch(u){console.warn("保存排序偏好失败:",u)}},l=(0,a.KR)([]),c=(0,a.KR)(!0),u=(0,a.KR)(""),d=(0,a.KR)(i()),f=(0,a.KR)({totalEvents:0,totalPhotos:0,totalVideos:0,totalAudios:0}),h=_a.getLoadingStrategy(),p=async()=>{try{c.value=!0,u.value="";const e=await ga();if(e.success){l.value=e.data;const t=e.data.flatMap(e=>e.events);t.length>0&&h.enablePreload&&ri(t,h.preloadCount,Aa)}else u.value=e.message||"获取事件列表失败"}catch(e){u.value="网络错误，请稍后重试",console.error("加载事件列表失败:",e)}finally{c.value=!1}},m=async()=>{try{const e=await ka();e.success&&(f.value=e.data)}catch(e){console.error("加载统计数据失败:",e)}},g=(0,o.EW)(()=>f.value.totalEvents),v=(0,o.EW)(()=>f.value.totalPhotos),y=(0,o.EW)(()=>f.value.totalVideos),w=(0,o.EW)(()=>f.value.totalAudios),b=(0,o.EW)(()=>{if(!l.value||0===l.value.length)return[];const e=[...l.value];return d.value?e.sort((e,t)=>{const n=new Date(e.events[0]?.date||"1970-01-01"),r=new Date(t.events[0]?.date||"1970-01-01");return n-r}):e.sort((e,t)=>{const n=new Date(e.events[0]?.date||"1970-01-01"),r=new Date(t.events[0]?.date||"1970-01-01");return r-n})}),E=t=>{console.log("查看事件:",t),e.push(`/event/${t.id}`)},A=()=>{console.log("添加新事件"),e.push("/add")},k=()=>{console.log("排序方式改变:",d.value?"正序":"倒序"),s(d.value)},R=(e,t)=>e<2&&0===t,L=(e,t)=>e<3&&0===t?"high":e<6?"normal":"low",S=e=>{const t=[];return e.media.images&&e.media.images.length>0&&e.media.images.forEach(e=>{t.push({...e,type:"image"})}),e.media.videos&&e.media.videos.length>0&&e.media.videos.forEach(e=>{t.push({...e,type:"video"})}),t},C=async e=>{await(0,o.dY)();const t=document.querySelector(`[data-event-id="${e}"]`);t?t.scrollIntoView({behavior:"smooth",block:"center"}):console.warn("未找到指定的事件卡片:",e)},T=()=>{if(l.value&&l.value.length>0){const e=l.value.flatMap(e=>e.events);if(e.length>0){const t=e.sort((e,t)=>new Date(t.date)-new Date(e.date))[0];return t.id}}return null},O=e=>{if(!l.value||0===l.value.length)return null;const t=l.value.flatMap(e=>e.events);if(0===t.length)return null;const n=parseInt(e,10);if(isNaN(n))return T();let r=t[0],o=Math.abs(parseInt(r.id,10)-n);for(const a of t){const e=parseInt(a.id,10);if(!isNaN(e)){const t=Math.abs(e-n);t<o&&(o=t,r=a)}}return r.id};return(0,o.sV)(async()=>{await Promise.all([p(),m()]);const e=t.query.highlight;if(e){const t=l.value.flatMap(e=>e.events),n=t.find(t=>String(t.id)===String(e));if(n)C(e);else{const t=O(e);t&&C(t)}}}),{currentAge:r,timelinePeriods:l,sortedTimelinePeriods:b,sortAscending:d,totalEvents:g,totalPhotos:v,totalVideos:y,totalAudios:w,loading:c,error:u,viewEvent:E,addEvent:A,loadEventsList:p,onSortChange:k,getSortPreference:i,saveSortPreference:s,getMediaUrl:Aa,scrollToEvent:C,findLatestEventId:T,findClosestEventId:O,shouldPreloadImage:R,getImagePriority:L,getAllMediaItems:S,loadingStrategy:h}}};const ai=(0,Ba.A)(oi,[["render",Ht],["__scopeId","data-v-bf0b8900"]]);var ii=ai;const si={class:"event-detail"},li={class:"detail-header"},ci={key:0,class:"loading"},ui={key:1,class:"error-container"},di={key:2,class:"event-container"},fi={class:"event-header"},hi={class:"event-title"},pi={class:"event-meta-info"},mi={class:"event-date"},gi={class:"event-age"},vi={key:0,class:"photos-section"},yi={class:"section-title"},wi={class:"photos-grid"},bi=["onClick"],Ei={key:0,class:"photo-icon"},Ai={class:"photo-index"},ki={class:"media-desc"},Ri={key:1,class:"videos-section"},Li={class:"section-title"},Si={class:"videos-grid"},Ci=["onClick"],Ti=["src"],Oi={class:"video-overlay"},xi={key:0,class:"video-duration"},_i={class:"media-desc"},Pi={key:2,class:"audio-section"},Di={class:"section-title"},Ii={class:"audio-list"},Ui={class:"audio-player"},Mi=["onClick"],Ni={key:0},$i={key:1},Bi={key:2},Fi={class:"audio-info"},ji={class:"audio-desc"},Vi={key:0,class:"audio-progress"},Xi={class:"progress-bar"},Wi={class:"time-display"},qi={key:0,class:"audio-controls"},Ki=["src"],zi={class:"description-section"},Qi={class:"event-description"},Hi={class:"additional-info"},Yi={key:0,class:"info-item"},Ji={class:"info-value"},Gi={class:"info-item"},Zi={class:"info-value"},es={class:"action-buttons"},ts={class:"photo-viewer"},ns={class:"current-photo"},rs={key:0,class:"photo-icon"},os={class:"photo-counter"},as={class:"video-player"},is=["src"],ss={class:"video-info"},ls={class:"video-title"},cs={class:"video-controls"},us={class:"video-counter"};function ds(e,t,n,r,a,i){return(0,o.uX)(),(0,o.CE)("div",si,[(0,o.Lk)("header",li,[(0,o.Lk)("button",{class:"back-btn",onClick:t[0]||(t[0]=(...e)=>r.goBack&&r.goBack(...e))}," ← 返回 "),t[24]||(t[24]=(0,o.Lk)("h1",{class:"page-title"},"事件详情",-1))]),r.loading?((0,o.uX)(),(0,o.CE)("div",ci,[...t[25]||(t[25]=[(0,o.Lk)("div",{class:"loading-spinner"},"⏳",-1),(0,o.Lk)("p",null,"正在加载事件详情...",-1)])])):r.error?((0,o.uX)(),(0,o.CE)("div",ui,[t[26]||(t[26]=(0,o.Lk)("div",{class:"error-icon"},"⚠️",-1)),(0,o.Lk)("p",null,(0,ct.v_)(r.error),1),(0,o.Lk)("button",{class:"retry-btn",onClick:t[1]||(t[1]=(...e)=>r.loadEventDetail&&r.loadEventDetail(...e))},"重试")])):r.event?((0,o.uX)(),(0,o.CE)("div",di,[(0,o.Lk)("div",fi,[(0,o.Lk)("h2",hi,(0,ct.v_)(r.event.title),1),(0,o.Lk)("div",pi,[(0,o.Lk)("span",mi,(0,ct.v_)(r.formatDate(r.event.date)),1),(0,o.Lk)("span",gi,(0,ct.v_)(r.getAgeAtEvent(r.event.date)),1)])]),r.event.media.images&&r.event.media.images.length>0?((0,o.uX)(),(0,o.CE)("div",vi,[(0,o.Lk)("h3",yi,"照片 ("+(0,ct.v_)(r.event.media.images.length)+"张)",1),(0,o.Lk)("div",wi,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(r.event.media.images,(e,t)=>((0,o.uX)(),(0,o.CE)("div",{key:t,class:"photo-item",onClick:e=>r.openPhotoViewer(t)},[(0,o.Lk)("div",{class:"photo-placeholder",style:(0,ct.Tr)({backgroundImage:`url(${r.getMediaUrl(r.event.id,e.fileName)})`})},[e.fileName?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("span",Ei,"📷")),(0,o.Lk)("span",Ai,(0,ct.v_)(t+1),1)],4),(0,o.Lk)("p",ki,(0,ct.v_)(e.desc),1)],8,bi))),128))])])):(0,o.Q3)("",!0),r.event.media.videos&&r.event.media.videos.length>0?((0,o.uX)(),(0,o.CE)("div",Ri,[(0,o.Lk)("h3",Li,"视频 ("+(0,ct.v_)(r.event.media.videos.length)+"个)",1),(0,o.Lk)("div",Si,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(r.event.media.videos,(e,n)=>((0,o.uX)(),(0,o.CE)("div",{key:n,class:"video-item"},[(0,o.Lk)("div",{class:"video-container",onClick:t=>r.openVideoPlayer(e,n)},[(0,o.Lk)("video",{src:r.getMediaUrl(r.event.id,e.fileName),class:"video-preview",preload:"metadata",onLoadedmetadata:t[2]||(t[2]=(...e)=>r.onVideoLoaded&&r.onVideoLoaded(...e))}," 您的浏览器不支持视频播放 ",40,Ti),(0,o.Lk)("div",Oi,[t[27]||(t[27]=(0,o.Lk)("span",{class:"play-overlay"},"▶️",-1)),e.duration?((0,o.uX)(),(0,o.CE)("span",xi,(0,ct.v_)(r.formatDuration(e.duration)),1)):(0,o.Q3)("",!0)])],8,Ci),(0,o.Lk)("p",_i,(0,ct.v_)(e.desc),1)]))),128))])])):(0,o.Q3)("",!0),r.event.media.audios&&r.event.media.audios.length>0?((0,o.uX)(),(0,o.CE)("div",Pi,[(0,o.Lk)("h3",Di,"录音 ("+(0,ct.v_)(r.event.media.audios.length)+"段)",1),(0,o.Lk)("div",Ii,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(r.event.media.audios,(e,n)=>((0,o.uX)(),(0,o.CE)("div",{key:n,class:"audio-item"},[(0,o.Lk)("div",Ui,[(0,o.Lk)("button",{class:"play-btn",onClick:t=>r.toggleAudio(e,n)},[r.currentPlayingAudio===n&&r.isAudioPlaying?((0,o.uX)(),(0,o.CE)("span",Ni,"⏸️")):r.currentPlayingAudio===n&&r.isAudioLoading?((0,o.uX)(),(0,o.CE)("span",$i,"⏳")):((0,o.uX)(),(0,o.CE)("span",Bi,"▶️"))],8,Mi),(0,o.Lk)("div",Fi,[(0,o.Lk)("span",ji,(0,ct.v_)(e.desc),1),r.currentPlayingAudio===n?((0,o.uX)(),(0,o.CE)("div",Vi,[(0,o.Lk)("div",Xi,[(0,o.Lk)("div",{class:"progress-fill",style:(0,ct.Tr)({width:r.audioProgress+"%"})},null,4)]),(0,o.Lk)("span",Wi,(0,ct.v_)(r.formatTime(r.audioCurrentTime))+" / "+(0,ct.v_)(r.formatTime(r.audioDuration)),1)])):(0,o.Q3)("",!0)]),r.currentPlayingAudio===n?((0,o.uX)(),(0,o.CE)("div",qi,[(0,o.Lk)("button",{class:"volume-btn",onClick:t[3]||(t[3]=(...e)=>r.toggleMute&&r.toggleMute(...e))},(0,ct.v_)(r.isAudioMuted?"🔇":"🔊"),1)])):(0,o.Q3)("",!0)]),(0,o.Lk)("audio",{ref_for:!0,ref:`audioPlayer${n}`,src:r.getMediaUrl(r.event.id,e.fileName),onLoadedmetadata:t[4]||(t[4]=(...e)=>r.onAudioLoadedMetadata&&r.onAudioLoadedMetadata(...e)),onTimeupdate:t[5]||(t[5]=(...e)=>r.onAudioTimeUpdate&&r.onAudioTimeUpdate(...e)),onEnded:t[6]||(t[6]=(...e)=>r.onAudioEnded&&r.onAudioEnded(...e)),onError:t[7]||(t[7]=(...e)=>r.onAudioError&&r.onAudioError(...e)),onLoadstart:t[8]||(t[8]=(...e)=>r.onAudioLoadStart&&r.onAudioLoadStart(...e)),onCanplay:t[9]||(t[9]=(...e)=>r.onAudioCanPlay&&r.onAudioCanPlay(...e)),preload:"metadata"},null,40,Ki)]))),128))])])):(0,o.Q3)("",!0),(0,o.Lk)("div",zi,[t[28]||(t[28]=(0,o.Lk)("h3",{class:"section-title"},"详细描述",-1)),(0,o.Lk)("p",Qi,(0,ct.v_)(r.event.description),1)]),(0,o.Lk)("div",Hi,[r.event.location?((0,o.uX)(),(0,o.CE)("div",Yi,[t[29]||(t[29]=(0,o.Lk)("span",{class:"info-label"},"地点:",-1)),(0,o.Lk)("span",Ji,(0,ct.v_)(r.event.location),1)])):(0,o.Q3)("",!0),(0,o.Lk)("div",Gi,[t[30]||(t[30]=(0,o.Lk)("span",{class:"info-label"},"记录时间:",-1)),(0,o.Lk)("span",Zi,(0,ct.v_)(r.formatDateTime(r.event.date)),1)])]),(0,o.Lk)("div",es,[(0,o.Lk)("button",{class:"edit-btn",onClick:t[10]||(t[10]=(...e)=>r.editEvent&&r.editEvent(...e))}," ✏️ 编辑 "),(0,o.Lk)("button",{class:"delete-btn",onClick:t[11]||(t[11]=(...e)=>r.deleteEvent&&r.deleteEvent(...e))}," 🗑️ 删除 ")])])):(0,o.Q3)("",!0),r.showPhotoViewer?((0,o.uX)(),(0,o.CE)("div",{key:3,class:"photo-modal",onClick:t[16]||(t[16]=(...e)=>r.closePhotoViewer&&r.closePhotoViewer(...e))},[(0,o.Lk)("div",{class:"modal-content",onClick:t[15]||(t[15]=(0,ut.D$)(()=>{},["stop"]))},[(0,o.Lk)("button",{class:"modal-close",onClick:t[12]||(t[12]=(...e)=>r.closePhotoViewer&&r.closePhotoViewer(...e))},"✕"),(0,o.Lk)("div",ts,[r.currentPhotoIndex>0?((0,o.uX)(),(0,o.CE)("button",{key:0,class:"nav-btn prev",onClick:t[13]||(t[13]=(...e)=>r.prevPhoto&&r.prevPhoto(...e))},"‹")):(0,o.Q3)("",!0),(0,o.Lk)("div",ns,[(0,o.Lk)("div",{class:"large-photo-placeholder",style:(0,ct.Tr)({backgroundImage:`url(${r.getMediaUrl(r.event.id,r.event.media.images[r.currentPhotoIndex].fileName)})`})},[r.event.media.images[r.currentPhotoIndex].fileName?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("span",rs,"📷"))],4),(0,o.Lk)("p",os,(0,ct.v_)(r.currentPhotoIndex+1)+" / "+(0,ct.v_)(r.event.media.images.length),1)]),r.currentPhotoIndex<r.event.media.images.length-1?((0,o.uX)(),(0,o.CE)("button",{key:1,class:"nav-btn next",onClick:t[14]||(t[14]=(...e)=>r.nextPhoto&&r.nextPhoto(...e))},"›")):(0,o.Q3)("",!0)])])])):(0,o.Q3)("",!0),r.showVideoPlayer?((0,o.uX)(),(0,o.CE)("div",{key:4,class:"video-modal",onClick:t[23]||(t[23]=(...e)=>r.closeVideoPlayer&&r.closeVideoPlayer(...e))},[(0,o.Lk)("div",{class:"modal-content",onClick:t[22]||(t[22]=(0,ut.D$)(()=>{},["stop"]))},[(0,o.Lk)("button",{class:"modal-close",onClick:t[17]||(t[17]=(...e)=>r.closeVideoPlayer&&r.closeVideoPlayer(...e))},"✕"),(0,o.Lk)("div",as,[(0,o.Lk)("video",{ref:"videoPlayerRef",src:r.getMediaUrl(r.event.id,r.currentVideo?.fileName),class:"modal-video",controls:"",autoplay:"",onEnded:t[18]||(t[18]=(...e)=>r.onVideoEnded&&r.onVideoEnded(...e)),onError:t[19]||(t[19]=(...e)=>r.onVideoError&&r.onVideoError(...e))}," 您的浏览器不支持视频播放 ",40,is),(0,o.Lk)("div",ss,[(0,o.Lk)("h3",ls,(0,ct.v_)(r.currentVideo?.desc||"视频"),1),(0,o.Lk)("div",cs,[r.currentVideoIndex>0?((0,o.uX)(),(0,o.CE)("button",{key:0,class:"nav-btn prev",onClick:t[20]||(t[20]=(...e)=>r.prevVideo&&r.prevVideo(...e))},"‹ 上一个")):(0,o.Q3)("",!0),(0,o.Lk)("span",us,(0,ct.v_)(r.currentVideoIndex+1)+" / "+(0,ct.v_)(r.event.media.videos.length),1),r.currentVideoIndex<r.event.media.videos.length-1?((0,o.uX)(),(0,o.CE)("button",{key:1,class:"nav-btn next",onClick:t[21]||(t[21]=(...e)=>r.nextVideo&&r.nextVideo(...e))},"下一个 ›")):(0,o.Q3)("",!0)])])])])])):(0,o.Q3)("",!0)])}var fs={name:"EventDetail",setup(){const e=lt(),t=st(),n=(0,a.KR)(null),r=(0,a.KR)(!1),i=(0,a.KR)(!1),s=(0,a.KR)(0),l=(0,a.KR)(!1),c=(0,a.KR)(0),u=(0,a.KR)(null),d=(0,a.KR)(null),f=(0,a.KR)(-1),h=(0,a.KR)(!1),p=(0,a.KR)(!1),m=(0,a.KR)(!1),g=(0,a.KR)(0),v=(0,a.KR)(0),y=(0,a.KR)(0),w=(0,a.KR)(null),b=(0,a.KR)(!0),E=(0,a.KR)(""),A=async()=>{try{b.value=!0,E.value="";const r=e.params.id,o=await va(r);o.success?n.value=o.data:(E.value=o.message||"获取事件详情失败","事件不存在"===o.message&&setTimeout(()=>{t.push("/")},3e3))}catch(r){E.value="网络错误，请稍后重试",console.error("加载事件详情失败:",r)}finally{b.value=!1}},k=e=>Jt()(e).format("YYYY年MM月DD日"),R=e=>Jt()(e).format("YYYY年MM月DD日 HH:mm"),L=e=>{const t=Jt()("2025-05-09"),n=Jt()(e),r=n.diff(t,"month");if(r<12){const e=t.add(r,"month"),o=n.diff(e,"day");if(0===r){const e=n.diff(t,"day");return`出生第${e}天`}return`${r}个月${o>0?`${o}天`:""}`}{const e=Math.floor(r/12),t=r%12;return`${e}岁${t>0?`${t}个月`:""}`}},S=()=>{t.push({path:"/",query:{highlight:n.value?.id}})},C=e=>{s.value=e,i.value=!0},T=()=>{i.value=!1},O=()=>{s.value>0&&s.value--},x=()=>{s.value<n.value.media.images.length-1&&s.value++},_=(e,t)=>{u.value=e,c.value=t,l.value=!0},P=()=>{l.value=!1,d.value&&d.value.pause()},D=()=>{c.value>0&&(c.value--,u.value=n.value.media.videos[c.value])},I=()=>{c.value<n.value.media.videos.length-1&&(c.value++,u.value=n.value.media.videos[c.value])},U=e=>{const t=e.target;t.duration&&console.log("视频时长:",t.duration)},M=()=>{console.log("视频播放结束"),c.value<n.value.media.videos.length-1&&I()},N=e=>{console.error("视频播放错误:",e),alert("视频播放失败，请检查网络连接或联系管理员")},$=e=>{const t=Math.floor(e/60),n=Math.floor(e%60);return`${t}:${n.toString().padStart(2,"0")}`},B=async(e,t)=>{const n=document.querySelector(`audio[src*="${e.fileName}"]`);if(n){if(f.value===t&&h.value)return n.pause(),void(h.value=!1);w.value&&w.value!==n&&(w.value.pause(),w.value.currentTime=0);try{f.value=t,w.value=n,p.value=!0,await n.play(),h.value=!0,p.value=!1}catch(E){console.error("音频播放失败:",E),p.value=!1,h.value=!1,alert("音频播放失败，请检查网络连接")}}else console.error("音频元素不存在")},F=()=>{p.value=!0},j=()=>{p.value=!1},V=e=>{const t=e.target;y.value=t.duration||0},X=e=>{const t=e.target;v.value=t.currentTime,y.value>0&&(g.value=t.currentTime/y.value*100)},W=()=>{h.value=!1,f.value=-1,g.value=0,v.value=0,w.value=null},q=e=>{console.error("音频播放错误:",e),h.value=!1,p.value=!1,f.value=-1,alert("音频加载失败，请检查网络连接")},K=()=>{w.value&&(m.value=!m.value,w.value.muted=m.value)},z=e=>{if(!e||isNaN(e))return"0:00";const t=Math.floor(e/60),n=Math.floor(e%60);return`${t}:${n.toString().padStart(2,"0")}`},Q=()=>{console.log("编辑事件:",n.value.id),t.push(`/edit/${n.value.id}`)},H=async()=>{if(confirm("确定要删除这个事件吗？此操作不可恢复。"))try{const e=await ba(n.value.id);e.success?t.push({path:"/",query:{highlight:n.value.id}}):alert(e.message||"删除失败")}catch(e){alert("网络错误，删除失败"),console.error("删除事件失败:",e)}};return(0,o.sV)(async()=>{await A(),window.scrollTo(0,0)}),{event:n,isPlaying:r,showPhotoViewer:i,currentPhotoIndex:s,showVideoPlayer:l,currentVideoIndex:c,currentVideo:u,videoPlayerRef:d,currentPlayingAudio:f,isAudioPlaying:h,isAudioLoading:p,isAudioMuted:m,audioProgress:g,audioCurrentTime:v,audioDuration:y,currentAudioElement:w,loading:b,error:E,formatDate:k,formatDateTime:R,getAgeAtEvent:L,goBack:S,openPhotoViewer:C,closePhotoViewer:T,prevPhoto:O,nextPhoto:x,openVideoPlayer:_,closeVideoPlayer:P,prevVideo:D,nextVideo:I,onVideoLoaded:U,onVideoEnded:M,onVideoError:N,formatDuration:$,toggleAudio:B,onAudioLoadStart:F,onAudioCanPlay:j,onAudioLoadedMetadata:V,onAudioTimeUpdate:X,onAudioEnded:W,onAudioError:q,toggleMute:K,formatTime:z,editEvent:Q,deleteEvent:H,loadEventDetail:A,getMediaUrl:Aa}}};const hs=(0,Ba.A)(fs,[["render",ds],["__scopeId","data-v-0c1f6e9e"]]);var ps=hs;const ms={class:"add-edit-event"},gs={class:"header"},vs={class:"page-title"},ys={key:0,class:"loading-container"},ws={key:1,class:"error-container"},bs={key:2,class:"form-container"},Es={class:"form-section"},As={class:"form-group"},ks={class:"form-group"},Rs={class:"form-group"},Ls={class:"form-group"},Ss={class:"form-section"},Cs=["disabled"],Ts={class:"upload-placeholder"},Os={key:0},xs={key:1},_s={key:2,class:"upload-hint"},Ps={key:0,class:"media-list"},Ds={key:0,class:"media-icon"},Is={class:"media-info"},Us=["onUpdate:modelValue"],Ms=["onClick"],Ns={class:"form-section"},$s=["disabled"],Bs={class:"upload-placeholder"},Fs={key:0},js={key:1},Vs={key:2,class:"upload-hint"},Xs={key:0,class:"media-list"},Ws={class:"media-info"},qs=["onUpdate:modelValue"],Ks=["onClick"],zs={class:"form-section"},Qs={class:"recording-controls"},Hs=["disabled"],Ys={key:0},Js={key:1},Gs={key:2},Zs={key:0,class:"recording-info"},el={class:"recording-time"},tl=["disabled"],nl={key:0,class:"media-list"},rl={class:"media-info"},ol=["onUpdate:modelValue"],al=["onClick"],il={class:"form-actions"},sl=["disabled"];function ll(e,t,n,r,a,i){return(0,o.uX)(),(0,o.CE)("div",ms,[(0,o.Lk)("header",gs,[(0,o.Lk)("button",{class:"back-btn",onClick:t[0]||(t[0]=(...e)=>r.goBack&&r.goBack(...e))}," ← 返回 "),(0,o.Lk)("h1",vs,(0,ct.v_)(r.isEdit?"编辑事件":"新增事件"),1)]),r.loading?((0,o.uX)(),(0,o.CE)("div",ys,[...t[15]||(t[15]=[(0,o.Lk)("div",{class:"loading-spinner"},"⏳",-1),(0,o.Lk)("p",null,"正在加载事件数据...",-1)])])):r.error&&!r.isEdit?((0,o.uX)(),(0,o.CE)("div",ws,[t[16]||(t[16]=(0,o.Lk)("div",{class:"error-icon"},"⚠️",-1)),t[17]||(t[17]=(0,o.Lk)("p",null,"加载失败",-1)),(0,o.Lk)("button",{class:"retry-btn",onClick:t[1]||(t[1]=(...e)=>r.loadEditData&&r.loadEditData(...e))},"重试")])):((0,o.uX)(),(0,o.CE)("div",bs,[(0,o.Lk)("form",{onSubmit:t[14]||(t[14]=(0,ut.D$)((...e)=>r.saveEvent&&r.saveEvent(...e),["prevent"])),class:"event-form"},[(0,o.Lk)("div",Es,[t[22]||(t[22]=(0,o.Lk)("h3",{class:"section-title"},"基本信息",-1)),(0,o.Lk)("div",As,[t[18]||(t[18]=(0,o.Lk)("label",{class:"form-label",for:"title"},"事件标题 *",-1)),(0,o.bo)((0,o.Lk)("input",{type:"text",id:"title","onUpdate:modelValue":t[2]||(t[2]=e=>r.formData.title=e),class:"form-input",placeholder:"请输入事件标题",required:""},null,512),[[ut.Jo,r.formData.title]])]),(0,o.Lk)("div",ks,[t[19]||(t[19]=(0,o.Lk)("label",{class:"form-label",for:"date"},"事件日期 *",-1)),(0,o.bo)((0,o.Lk)("input",{type:"date",id:"date","onUpdate:modelValue":t[3]||(t[3]=e=>r.formData.date=e),class:"form-input",required:""},null,512),[[ut.Jo,r.formData.date]])]),(0,o.Lk)("div",Rs,[t[20]||(t[20]=(0,o.Lk)("label",{class:"form-label",for:"location"},"地点",-1)),(0,o.bo)((0,o.Lk)("input",{type:"text",id:"location","onUpdate:modelValue":t[4]||(t[4]=e=>r.formData.location=e),class:"form-input",placeholder:"请输入地点"},null,512),[[ut.Jo,r.formData.location]])]),(0,o.Lk)("div",Ls,[t[21]||(t[21]=(0,o.Lk)("label",{class:"form-label",for:"description"},"详细描述",-1)),(0,o.bo)((0,o.Lk)("textarea",{id:"description","onUpdate:modelValue":t[5]||(t[5]=e=>r.formData.description=e),class:"form-textarea",rows:"4",placeholder:"请输入详细描述"},null,512),[[ut.Jo,r.formData.description]])])]),(0,o.Lk)("div",Ss,[t[23]||(t[23]=(0,o.Lk)("h3",{class:"section-title"},"照片",-1)),(0,o.Lk)("div",{class:(0,ct.C4)(["upload-area",{uploading:r.uploading}]),onClick:t[7]||(t[7]=e=>!r.uploading&&r.triggerImageUpload())},[(0,o.Lk)("input",{type:"file",ref:"imageInput",onChange:t[6]||(t[6]=(...e)=>r.handleImageUpload&&r.handleImageUpload(...e)),accept:"image/*",multiple:"",style:{display:"none"},disabled:r.uploading},null,40,Cs),(0,o.Lk)("div",Ts,[r.uploading?((0,o.uX)(),(0,o.CE)("span",Os,"⏳")):((0,o.uX)(),(0,o.CE)("span",xs,"📷")),(0,o.Lk)("p",null,(0,ct.v_)(r.uploading?"正在上传照片...":"点击上传照片"),1),r.uploading?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("span",_s,"支持多张图片上传"))])],2),r.formData.media.images.length>0?((0,o.uX)(),(0,o.CE)("div",Ps,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(r.formData.media.images,(e,t)=>((0,o.uX)(),(0,o.CE)("div",{key:`image-${t}`,class:"media-item"},[(0,o.Lk)("div",{class:"media-preview",style:(0,ct.Tr)(e.fileName&&r.isEdit?{backgroundImage:`url(${r.getMediaUrl(r.route.params.id,e.fileName)})`}:{})},[e.fileName&&r.isEdit?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("span",Ds,"📷"))],4),(0,o.Lk)("div",Is,[(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":t=>e.desc=t,class:"media-desc-input",placeholder:"请输入图片描述"},null,8,Us),[[ut.Jo,e.desc]])]),(0,o.Lk)("button",{type:"button",class:"remove-btn",onClick:e=>r.removeMedia("images",t)}," ✕ ",8,Ms)]))),128))])):(0,o.Q3)("",!0)]),(0,o.Lk)("div",Ns,[t[25]||(t[25]=(0,o.Lk)("h3",{class:"section-title"},"视频",-1)),(0,o.Lk)("div",{class:(0,ct.C4)(["upload-area",{uploading:r.uploading}]),onClick:t[9]||(t[9]=e=>!r.uploading&&r.triggerVideoUpload())},[(0,o.Lk)("input",{type:"file",ref:"videoInput",onChange:t[8]||(t[8]=(...e)=>r.handleVideoUpload&&r.handleVideoUpload(...e)),accept:"video/*",multiple:"",style:{display:"none"},disabled:r.uploading},null,40,$s),(0,o.Lk)("div",Bs,[r.uploading?((0,o.uX)(),(0,o.CE)("span",Fs,"⏳")):((0,o.uX)(),(0,o.CE)("span",js,"🎬")),(0,o.Lk)("p",null,(0,ct.v_)(r.uploading?"正在上传视频...":"点击上传视频"),1),r.uploading?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("span",Vs,"支持多个视频上传"))])],2),r.formData.media.videos.length>0?((0,o.uX)(),(0,o.CE)("div",Xs,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(r.formData.media.videos,(e,n)=>((0,o.uX)(),(0,o.CE)("div",{key:`video-${n}`,class:"media-item"},[t[24]||(t[24]=(0,o.Lk)("div",{class:"media-preview video"},[(0,o.Lk)("span",{class:"media-icon"},"🎬")],-1)),(0,o.Lk)("div",Ws,[(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":t=>e.desc=t,class:"media-desc-input",placeholder:"请输入视频描述"},null,8,qs),[[ut.Jo,e.desc]])]),(0,o.Lk)("button",{type:"button",class:"remove-btn",onClick:e=>r.removeMedia("videos",n)}," ✕ ",8,Ks)]))),128))])):(0,o.Q3)("",!0)]),(0,o.Lk)("div",zs,[t[29]||(t[29]=(0,o.Lk)("h3",{class:"section-title"},"录音",-1)),(0,o.Lk)("div",Qs,[(0,o.Lk)("button",{type:"button",class:(0,ct.C4)(["record-btn",{recording:r.isRecording,disabled:r.uploading}]),onClick:t[10]||(t[10]=(...e)=>r.toggleRecording&&r.toggleRecording(...e)),disabled:r.uploading},[r.isRecording?((0,o.uX)(),(0,o.CE)("span",Ys,"⏹️ 停止录音")):r.uploading?((0,o.uX)(),(0,o.CE)("span",Js,"⏳ 上传中...")):((0,o.uX)(),(0,o.CE)("span",Gs,"🎤 开始录音"))],10,Hs),r.isRecording?((0,o.uX)(),(0,o.CE)("div",Zs,[(0,o.Lk)("span",el,(0,ct.v_)(r.formatTime(r.recordingTime)),1),t[26]||(t[26]=(0,o.Lk)("span",{class:"recording-indicator"},"🔴 录音中",-1))])):(0,o.Q3)("",!0)]),(0,o.Lk)("div",{class:(0,ct.C4)(["upload-area secondary",{uploading:r.uploading,disabled:r.isRecording}]),onClick:t[12]||(t[12]=e=>!r.uploading&&!r.isRecording&&r.triggerAudioUpload())},[(0,o.Lk)("input",{type:"file",ref:"audioInput",onChange:t[11]||(t[11]=(...e)=>r.handleAudioUpload&&r.handleAudioUpload(...e)),accept:"audio/*",multiple:"",style:{display:"none"},disabled:r.uploading||r.isRecording},null,40,tl),t[27]||(t[27]=(0,o.Lk)("div",{class:"upload-placeholder"},[(0,o.Lk)("span",null,"📁"),(0,o.Lk)("p",null,"或者点击上传音频文件"),(0,o.Lk)("span",{class:"upload-hint"},"支持多段音频上传")],-1))],2),r.formData.media.audios.length>0?((0,o.uX)(),(0,o.CE)("div",nl,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(r.formData.media.audios,(e,n)=>((0,o.uX)(),(0,o.CE)("div",{key:`audio-${n}`,class:"media-item"},[t[28]||(t[28]=(0,o.Lk)("div",{class:"media-preview audio"},[(0,o.Lk)("span",{class:"media-icon"},"🎙")],-1)),(0,o.Lk)("div",rl,[(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":t=>e.desc=t,class:"media-desc-input",placeholder:"请输入音频描述"},null,8,ol),[[ut.Jo,e.desc]])]),(0,o.Lk)("button",{type:"button",class:"remove-btn",onClick:e=>r.removeMedia("audios",n)}," ✕ ",8,al)]))),128))])):(0,o.Q3)("",!0)]),(0,o.Lk)("div",il,[(0,o.Lk)("button",{type:"button",class:"cancel-btn",onClick:t[13]||(t[13]=(...e)=>r.goBack&&r.goBack(...e))}," 取消 "),(0,o.Lk)("button",{type:"submit",class:"save-btn",disabled:!r.isFormValid||r.saving},(0,ct.v_)(r.saving?"保存中...":r.isEdit?"保存修改":"创建事件"),9,sl)])],32)]))])}class cl{constructor(){this.mediaRecorder=null,this.audioChunks=[],this.isRecording=!1,this.stream=null,this.onDataAvailable=null,this.onStop=null,this.onError=null,this.startTime=null,this.recordingTimer=null,this.onTimeUpdate=null}static isSupported(){return!!(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia&&window.MediaRecorder)}async startRecording(){try{if(this.isRecording)throw new Error("录音已在进行中");if(!cl.isSupported())throw new Error("当前浏览器不支持录音功能");this.stream=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0}});const e={mimeType:this.getSupportedMimeType()};return this.mediaRecorder=new MediaRecorder(this.stream,e),this.audioChunks=[],this.mediaRecorder.ondataavailable=e=>{e.data.size>0&&this.audioChunks.push(e.data),this.onDataAvailable&&this.onDataAvailable(e)},this.mediaRecorder.onstop=()=>{this.isRecording=!1,this.stopTimer();const e=new Blob(this.audioChunks,{type:this.getSupportedMimeType()});this.onStop&&this.onStop(e,this.getRecordingDuration()),this.cleanup()},this.mediaRecorder.onerror=e=>{console.error("录音错误:",e.error),this.isRecording=!1,this.stopTimer(),this.cleanup(),this.onError&&this.onError(e.error)},this.mediaRecorder.start(1e3),this.isRecording=!0,this.startTime=Date.now(),this.startTimer(),!0}catch(e){throw console.error("开始录音失败:",e),this.cleanup(),e}}stopRecording(){if(!this.isRecording||!this.mediaRecorder)return!1;try{return this.mediaRecorder.stop(),!0}catch(e){return console.error("停止录音失败:",e),this.cleanup(),!1}}cancelRecording(){if(!this.isRecording)return!1;try{return this.isRecording=!1,this.stopTimer(),this.mediaRecorder&&"inactive"!==this.mediaRecorder.state&&this.mediaRecorder.stop(),this.cleanup(),!0}catch(e){return console.error("取消录音失败:",e),this.cleanup(),!1}}getRecordingDuration(){return this.startTime?Math.floor((Date.now()-this.startTime)/1e3):0}getSupportedMimeType(){const e=["audio/webm;codecs=opus","audio/webm","audio/ogg;codecs=opus","audio/ogg","audio/wav","audio/mp4","audio/mpeg"];for(const t of e)if(MediaRecorder.isTypeSupported(t))return t;return"audio/webm"}getFileExtension(){const e=this.getSupportedMimeType();return e.includes("webm")?"webm":e.includes("ogg")?"ogg":e.includes("wav")?"wav":e.includes("mp4")?"m4a":e.includes("mpeg")?"mp3":"webm"}startTimer(){this.recordingTimer=setInterval(()=>{this.onTimeUpdate&&this.onTimeUpdate(this.getRecordingDuration())},1e3)}stopTimer(){this.recordingTimer&&(clearInterval(this.recordingTimer),this.recordingTimer=null)}cleanup(){this.stopTimer(),this.stream&&(this.stream.getTracks().forEach(e=>e.stop()),this.stream=null),this.mediaRecorder=null,this.audioChunks=[],this.startTime=null}destroy(){this.cancelRecording(),this.onDataAvailable=null,this.onStop=null,this.onError=null,this.onTimeUpdate=null}}var ul=cl,dl={name:"AddEditEvent",setup(){const e=lt(),t=st(),n=(0,a.KR)(null),r=(0,a.KR)(null),i=(0,a.KR)(null),s=(0,a.KR)(!1),l=(0,a.KR)(!1),c=(0,a.KR)(!1),u=(0,a.KR)(""),d=(0,a.KR)(!1),f=(0,a.KR)(0),h=(0,a.KR)(null),p=(0,o.EW)(()=>!!e.params.id),m=(0,a.KR)({title:"",date:Jt()().format("YYYY-MM-DD"),location:"",description:"",media:{images:[],videos:[],audios:[]}}),g=(0,o.EW)(()=>""!==m.value.title.trim()&&""!==m.value.date),v=async()=>{if(p.value)try{s.value=!0;const n=e.params.id,r=await va(n);if(r.success){const e=r.data;m.value={title:e.title,date:e.date,location:e.location||"",description:e.description||"",media:{images:[...e.media.images],videos:[...e.media.videos],audios:[...e.media.audios]}}}else alert(r.message||"获取事件数据失败"),"事件不存在"===r.message&&setTimeout(()=>{t.push("/")},1e3)}catch(n){alert("网络错误，请稍后重试"),console.error("加载编辑数据失败:",n)}finally{s.value=!1}},y=()=>{n.value.click()},w=()=>{r.value.click()},b=()=>{i.value.click()},E=async e=>{const t=Array.from(e.target.files);if(0!==t.length)try{c.value=!0;const e=await Ea(t,"image");e.success?(e.data.successful.forEach(e=>{m.value.media.images.push({fileName:e.serverFileName,desc:"",size:e.size,uploadTime:e.uploadTime})}),e.data.failed>0&&alert(e.message)):alert(e.message||"图片上传失败")}catch(n){alert("网络错误，图片上传失败"),console.error("图片上传失败:",n)}finally{c.value=!1,e.target.value=""}},A=async e=>{const t=Array.from(e.target.files);if(0!==t.length)try{c.value=!0;const e=await Ea(t,"video");e.success?(e.data.successful.forEach(e=>{m.value.media.videos.push({fileName:e.serverFileName,desc:"",size:e.size,uploadTime:e.uploadTime})}),e.data.failed>0&&alert(e.message)):alert(e.message||"视频上传失败")}catch(n){alert("网络错误，视频上传失败"),console.error("视频上传失败:",n)}finally{c.value=!1,e.target.value=""}},k=async e=>{const t=Array.from(e.target.files);if(0!==t.length)try{c.value=!0;const e=await Ea(t,"audio");e.success?(e.data.successful.forEach(e=>{m.value.media.audios.push({fileName:e.serverFileName,desc:"",size:e.size,uploadTime:e.uploadTime})}),e.data.failed>0&&alert(e.message)):alert(e.message||"音频上传失败")}catch(n){alert("网络错误，音频上传失败"),console.error("音频上传失败:",n)}finally{c.value=!1,e.target.value=""}},R=()=>{h.value||(h.value=new ul,h.value.onStop=async(e,t)=>{await T(e,t)},h.value.onTimeUpdate=e=>{f.value=e},h.value.onError=e=>{alert(`录音失败: ${e.message||"未知错误"}`),d.value=!1,f.value=0})},L=async()=>{try{if(!ul.isSupported())return void alert("当前浏览器不支持录音功能，请使用现代浏览器");R(),await h.value.startRecording(),d.value=!0,f.value=0}catch(e){alert(e.message||"无法启动录音，请检查麦克风权限"),d.value=!1,console.error("录音启动失败:",e)}},S=()=>{h.value&&d.value&&(h.value.stopRecording(),d.value=!1)},C=()=>{d.value?S():L()},T=async(e,t)=>{try{c.value=!0;const n=(new Date).toISOString().replace(/[:.]/g,"-"),r=h.value.getFileExtension(),o=`recording_${n}.${r}`,a=new File([e],o,{type:e.type}),i=await Ea([a],"audio");i.success?(i.data.successful.forEach(e=>{m.value.media.audios.push({fileName:e.serverFileName,desc:`录音 (${O(t)})`,size:e.size,uploadTime:e.uploadTime})}),i.data.failed>0&&alert(i.message)):alert(i.message||"录音上传失败")}catch(n){alert("网络错误，录音上传失败"),console.error("录音上传失败:",n)}finally{c.value=!1,f.value=0}},O=e=>{const t=Math.floor(e/60),n=e%60;return`${t.toString().padStart(2,"0")}:${n.toString().padStart(2,"0")}`},x=(e,t)=>{m.value.media[e].splice(t,1)},_=async()=>{if(g.value&&!l.value)try{l.value=!0;const n={title:m.value.title,date:m.value.date,location:m.value.location,description:m.value.description,media:{images:m.value.media.images.map(e=>({fileName:e.fileName,desc:e.desc})),videos:m.value.media.videos.map(e=>({fileName:e.fileName,desc:e.desc})),audios:m.value.media.audios.map(e=>({fileName:e.fileName,desc:e.desc}))}};let r;if(r=p.value?await wa(e.params.id,n):await ya(n),r.success){const n=p.value?e.params.id:r.data.id;t.push({path:"/",query:{highlight:n}})}else alert(r.message||"保存失败")}catch(n){alert("网络错误，保存失败"),console.error("保存事件失败:",n)}finally{l.value=!1}},P=()=>{p.value?t.push(`/event/${e.params.id}`):t.push("/")};return(0,o.sV)(async()=>{await v()}),(0,o.hi)(()=>{h.value&&h.value.destroy()}),{isEdit:p,formData:m,isFormValid:g,loading:s,saving:l,uploading:c,error:u,imageInput:n,videoInput:r,audioInput:i,isRecording:d,recordingTime:f,triggerImageUpload:y,triggerVideoUpload:w,triggerAudioUpload:b,handleImageUpload:E,handleVideoUpload:A,handleAudioUpload:k,toggleRecording:C,formatTime:O,removeMedia:x,saveEvent:_,goBack:P,loadEditData:v,getMediaUrl:Aa,route:e}}};const fl=(0,Ba.A)(dl,[["render",ll],["__scopeId","data-v-fb768bde"]]);var hl=fl;const pl=[{path:"/",name:"HomePage",component:ii},{path:"/event/:id",name:"EventDetail",component:ps},{path:"/add",name:"AddEvent",component:hl},{path:"/edit/:id",name:"EditEvent",component:hl}],ml=at({history:ce(ha.A.BasePath),routes:pl,scrollBehavior(e,t,n){return n||{top:0}}});var gl=ml},944:function(e){"use strict";var t=TypeError;e.exports=function(e){var n=e&&e.alphabet;if(void 0===n||"base64"===n||"base64url"===n)return n||"base64";throw new t("Incorrect `alphabet` option")}},1108:function(e,t,n){"use strict";var r=n(6955);e.exports=function(e){var t=r(e);return"BigInt64Array"===t||"BigUint64Array"===t}},1548:function(e,t,n){"use strict";var r=n(4576),o=n(9039),a=n(9519),i=n(4215),s=r.structuredClone;e.exports=!!s&&!o(function(){if("DENO"===i&&a>92||"NODE"===i&&a>94||"BROWSER"===i&&a>97)return!1;var e=new ArrayBuffer(8),t=s(e,{transfer:[e]});return 0!==e.byteLength||8!==t.byteLength})},1549:function(e,t,n){"use strict";n(6632)},1576:function(e){!function(t,n){e.exports=n()}(0,function(){"use strict";var e=1e3,t=6e4,n=36e5,r="millisecond",o="second",a="minute",i="hour",s="day",l="week",c="month",u="quarter",d="year",f="date",h="Invalid Date",p=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,m=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,g={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},v=function(e,t,n){var r=String(e);return!r||r.length>=t?e:""+Array(t+1-r.length).join(n)+e},y={s:v,z:function(e){var t=-e.utcOffset(),n=Math.abs(t),r=Math.floor(n/60),o=n%60;return(t<=0?"+":"-")+v(r,2,"0")+":"+v(o,2,"0")},m:function e(t,n){if(t.date()<n.date())return-e(n,t);var r=12*(n.year()-t.year())+(n.month()-t.month()),o=t.clone().add(r,c),a=n-o<0,i=t.clone().add(r+(a?-1:1),c);return+(-(r+(n-o)/(a?o-i:i-o))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:c,y:d,w:l,d:s,D:f,h:i,m:a,s:o,ms:r,Q:u}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},w="en",b={};b[w]=g;var E=function(e){return e instanceof L},A=function e(t,n,r){var o;if(!t)return w;if("string"==typeof t){var a=t.toLowerCase();b[a]&&(o=a),n&&(b[a]=n,o=a);var i=t.split("-");if(!o&&i.length>1)return e(i[0])}else{var s=t.name;b[s]=t,o=s}return!r&&o&&(w=o),o||!r&&w},k=function(e,t){if(E(e))return e.clone();var n="object"==typeof t?t:{};return n.date=e,n.args=arguments,new L(n)},R=y;R.l=A,R.i=E,R.w=function(e,t){return k(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var L=function(){function g(e){this.$L=A(e.locale,null,!0),this.parse(e)}var v=g.prototype;return v.parse=function(e){this.$d=function(e){var t=e.date,n=e.utc;if(null===t)return new Date(NaN);if(R.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var r=t.match(p);if(r){var o=r[2]-1||0,a=(r[7]||"0").substring(0,3);return n?new Date(Date.UTC(r[1],o,r[3]||1,r[4]||0,r[5]||0,r[6]||0,a)):new Date(r[1],o,r[3]||1,r[4]||0,r[5]||0,r[6]||0,a)}}return new Date(t)}(e),this.$x=e.x||{},this.init()},v.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},v.$utils=function(){return R},v.isValid=function(){return!(this.$d.toString()===h)},v.isSame=function(e,t){var n=k(e);return this.startOf(t)<=n&&n<=this.endOf(t)},v.isAfter=function(e,t){return k(e)<this.startOf(t)},v.isBefore=function(e,t){return this.endOf(t)<k(e)},v.$g=function(e,t,n){return R.u(e)?this[t]:this.set(n,e)},v.unix=function(){return Math.floor(this.valueOf()/1e3)},v.valueOf=function(){return this.$d.getTime()},v.startOf=function(e,t){var n=this,r=!!R.u(t)||t,u=R.p(e),h=function(e,t){var o=R.w(n.$u?Date.UTC(n.$y,t,e):new Date(n.$y,t,e),n);return r?o:o.endOf(s)},p=function(e,t){return R.w(n.toDate()[e].apply(n.toDate("s"),(r?[0,0,0,0]:[23,59,59,999]).slice(t)),n)},m=this.$W,g=this.$M,v=this.$D,y="set"+(this.$u?"UTC":"");switch(u){case d:return r?h(1,0):h(31,11);case c:return r?h(1,g):h(0,g+1);case l:var w=this.$locale().weekStart||0,b=(m<w?m+7:m)-w;return h(r?v-b:v+(6-b),g);case s:case f:return p(y+"Hours",0);case i:return p(y+"Minutes",1);case a:return p(y+"Seconds",2);case o:return p(y+"Milliseconds",3);default:return this.clone()}},v.endOf=function(e){return this.startOf(e,!1)},v.$set=function(e,t){var n,l=R.p(e),u="set"+(this.$u?"UTC":""),h=(n={},n[s]=u+"Date",n[f]=u+"Date",n[c]=u+"Month",n[d]=u+"FullYear",n[i]=u+"Hours",n[a]=u+"Minutes",n[o]=u+"Seconds",n[r]=u+"Milliseconds",n)[l],p=l===s?this.$D+(t-this.$W):t;if(l===c||l===d){var m=this.clone().set(f,1);m.$d[h](p),m.init(),this.$d=m.set(f,Math.min(this.$D,m.daysInMonth())).$d}else h&&this.$d[h](p);return this.init(),this},v.set=function(e,t){return this.clone().$set(e,t)},v.get=function(e){return this[R.p(e)]()},v.add=function(r,u){var f,h=this;r=Number(r);var p=R.p(u),m=function(e){var t=k(h);return R.w(t.date(t.date()+Math.round(e*r)),h)};if(p===c)return this.set(c,this.$M+r);if(p===d)return this.set(d,this.$y+r);if(p===s)return m(1);if(p===l)return m(7);var g=(f={},f[a]=t,f[i]=n,f[o]=e,f)[p]||1,v=this.$d.getTime()+r*g;return R.w(v,this)},v.subtract=function(e,t){return this.add(-1*e,t)},v.format=function(e){var t=this,n=this.$locale();if(!this.isValid())return n.invalidDate||h;var r=e||"YYYY-MM-DDTHH:mm:ssZ",o=R.z(this),a=this.$H,i=this.$m,s=this.$M,l=n.weekdays,c=n.months,u=function(e,n,o,a){return e&&(e[n]||e(t,r))||o[n].substr(0,a)},d=function(e){return R.s(a%12||12,e,"0")},f=n.meridiem||function(e,t,n){var r=e<12?"AM":"PM";return n?r.toLowerCase():r},p={YY:String(this.$y).slice(-2),YYYY:this.$y,M:s+1,MM:R.s(s+1,2,"0"),MMM:u(n.monthsShort,s,c,3),MMMM:u(c,s),D:this.$D,DD:R.s(this.$D,2,"0"),d:String(this.$W),dd:u(n.weekdaysMin,this.$W,l,2),ddd:u(n.weekdaysShort,this.$W,l,3),dddd:l[this.$W],H:String(a),HH:R.s(a,2,"0"),h:d(1),hh:d(2),a:f(a,i,!0),A:f(a,i,!1),m:String(i),mm:R.s(i,2,"0"),s:String(this.$s),ss:R.s(this.$s,2,"0"),SSS:R.s(this.$ms,3,"0"),Z:o};return r.replace(m,function(e,t){return t||p[e]||o.replace(":","")})},v.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},v.diff=function(r,f,h){var p,m=R.p(f),g=k(r),v=(g.utcOffset()-this.utcOffset())*t,y=this-g,w=R.m(this,g);return w=(p={},p[d]=w/12,p[c]=w,p[u]=w/3,p[l]=(y-v)/6048e5,p[s]=(y-v)/864e5,p[i]=y/n,p[a]=y/t,p[o]=y/e,p)[m]||y,h?w:R.a(w)},v.daysInMonth=function(){return this.endOf(c).$D},v.$locale=function(){return b[this.$L]},v.locale=function(e,t){if(!e)return this.$L;var n=this.clone(),r=A(e,t,!0);return r&&(n.$L=r),n},v.clone=function(){return R.w(this.$d,this)},v.toDate=function(){return new Date(this.valueOf())},v.toJSON=function(){return this.isValid()?this.toISOString():null},v.toISOString=function(){return this.$d.toISOString()},v.toString=function(){return this.$d.toUTCString()},g}(),S=L.prototype;return k.prototype=S,[["$ms",r],["$s",o],["$m",a],["$H",i],["$W",s],["$M",c],["$y",d],["$D",f]].forEach(function(e){S[e[1]]=function(t){return this.$g(t,e[0],e[1])}}),k.extend=function(e,t){return e.$i||(e(t,L,k),e.$i=!0),k},k.locale=A,k.isDayjs=E,k.unix=function(e){return k(1e3*e)},k.en=b[w],k.Ls=b,k.p={},k})},1806:function(e,t,n){"use strict";var r=n(6518),o=n(8551),a=n(2652),i=n(1767),s=[].push;r({target:"Iterator",proto:!0,real:!0},{toArray:function(){var e=[];return a(i(o(this)),s,{that:e,IS_RECORD:!0}),e}})},2303:function(e,t,n){"use strict";var r=n(4576),o=n(9504),a=r.Uint8Array,i=r.SyntaxError,s=r.parseInt,l=Math.min,c=/[^\da-f]/i,u=o(c.exec),d=o("".slice);e.exports=function(e,t){var n=e.length;if(n%2!==0)throw new i("String should be an even number of characters");var r=t?l(t.length,n/2):n/2,o=t||new a(r),f=0,h=0;while(h<r){var p=d(e,f,f+=2);if(u(c,p))throw new i("String should only contain hex characters");o[h++]=s(p,16)}return{bytes:o,read:f}}},2603:function(e,t,n){"use strict";var r=n(655);e.exports=function(e,t){return void 0===e?arguments.length<2?"":t:r(e)}},2804:function(e){"use strict";var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=t+"+/",r=t+"-_",o=function(e){for(var t={},n=0;n<64;n++)t[e.charAt(n)]=n;return t};e.exports={i2c:n,c2i:o(n),i2cUrl:r,c2iUrl:o(r)}},2812:function(e){"use strict";var t=TypeError;e.exports=function(e,n){if(e<n)throw new t("Not enough arguments");return e}},2967:function(e,t,n){"use strict";var r=n(6706),o=n(34),a=n(7750),i=n(3506);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{e=r(Object.prototype,"__proto__","set"),e(n,[]),t=n instanceof Array}catch(s){}return function(n,r){return a(n),i(r),o(n)?(t?e(n,r):n.__proto__=r,n):n}}():void 0)},3167:function(e,t,n){"use strict";var r=n(4901),o=n(34),a=n(2967);e.exports=function(e,t,n){var i,s;return a&&r(i=t.constructor)&&i!==n&&o(s=i.prototype)&&s!==n.prototype&&a(e,s),e}},3238:function(e,t,n){"use strict";var r=n(4576),o=n(7811),a=n(7394),i=r.DataView;e.exports=function(e){if(!o||0!==a(e))return!1;try{return new i(e),!1}catch(t){return!0}}},3463:function(e){"use strict";var t=TypeError;e.exports=function(e){if("string"==typeof e)return e;throw new t("Argument is not a string")}},3506:function(e,t,n){"use strict";var r=n(3925),o=String,a=TypeError;e.exports=function(e){if(r(e))return e;throw new a("Can't set "+o(e)+" as a prototype")}},3925:function(e,t,n){"use strict";var r=n(34);e.exports=function(e){return r(e)||null===e}},3972:function(e,t,n){"use strict";var r=n(34),o=String,a=TypeError;e.exports=function(e){if(void 0===e||r(e))return e;throw new a(o(e)+" is not an object or undefined")}},4154:function(e,t,n){"use strict";var r=n(6955),o=TypeError;e.exports=function(e){if("Uint8Array"===r(e))return e;throw new o("Argument is not an Uint8Array")}},4215:function(e,t,n){"use strict";var r=n(4576),o=n(2839),a=n(2195),i=function(e){return o.slice(0,e.length)===e};e.exports=function(){return i("Bun/")?"BUN":i("Cloudflare-Workers")?"CLOUDFLARE":i("Deno/")?"DENO":i("Node.js/")?"NODE":r.Bun&&"string"==typeof Bun.version?"BUN":r.Deno&&"object"==typeof Deno.version?"DENO":"process"===a(r.process)?"NODE":r.window&&r.document?"BROWSER":"REST"}()},4226:function(e,t,n){"use strict";var r=n(6518),o=n(4576),a=n(3463),i=n(4154),s=n(5169),l=n(2303);o.Uint8Array&&r({target:"Uint8Array",proto:!0},{setFromHex:function(e){i(this),a(e),s(this.buffer);var t=l(e,this).read;return{read:t,written:t/2}}})},4483:function(e,t,n){"use strict";var r,o,a,i,s=n(4576),l=n(9429),c=n(1548),u=s.structuredClone,d=s.ArrayBuffer,f=s.MessageChannel,h=!1;if(c)h=function(e){u(e,{transfer:[e]})};else if(d)try{f||(r=l("worker_threads"),r&&(f=r.MessageChannel)),f&&(o=new f,a=new d(2),i=function(e){o.port1.postMessage(null,[e])},2===a.byteLength&&(i(a),0===a.byteLength&&(h=i)))}catch(p){}e.exports=h},4603:function(e,t,n){"use strict";var r=n(6840),o=n(9504),a=n(655),i=n(2812),s=URLSearchParams,l=s.prototype,c=o(l.append),u=o(l["delete"]),d=o(l.forEach),f=o([].push),h=new s("a=1&a=2&b=3");h["delete"]("a",1),h["delete"]("b",void 0),h+""!=="a=2"&&r(l,"delete",function(e){var t=arguments.length,n=t<2?void 0:arguments[1];if(t&&void 0===n)return u(this,e);var r=[];d(this,function(e,t){f(r,{key:t,value:e})}),i(t,1);var o,s=a(e),l=a(n),h=0,p=0,m=!1,g=r.length;while(h<g)o=r[h++],m||o.key===s?(m=!0,u(this,o.key)):p++;while(p<g)o=r[p++],o.key===s&&o.value===l||c(this,o.key,o.value)},{enumerable:!0,unsafe:!0})},4644:function(e,t,n){"use strict";var r,o,a,i=n(7811),s=n(3724),l=n(4576),c=n(4901),u=n(34),d=n(9297),f=n(6955),h=n(6823),p=n(6699),m=n(6840),g=n(2106),v=n(1625),y=n(2787),w=n(2967),b=n(8227),E=n(3392),A=n(1181),k=A.enforce,R=A.get,L=l.Int8Array,S=L&&L.prototype,C=l.Uint8ClampedArray,T=C&&C.prototype,O=L&&y(L),x=S&&y(S),_=Object.prototype,P=l.TypeError,D=b("toStringTag"),I=E("TYPED_ARRAY_TAG"),U="TypedArrayConstructor",M=i&&!!w&&"Opera"!==f(l.opera),N=!1,$={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},B={BigInt64Array:8,BigUint64Array:8},F=function(e){if(!u(e))return!1;var t=f(e);return"DataView"===t||d($,t)||d(B,t)},j=function(e){var t=y(e);if(u(t)){var n=R(t);return n&&d(n,U)?n[U]:j(t)}},V=function(e){if(!u(e))return!1;var t=f(e);return d($,t)||d(B,t)},X=function(e){if(V(e))return e;throw new P("Target is not a typed array")},W=function(e){if(c(e)&&(!w||v(O,e)))return e;throw new P(h(e)+" is not a typed array constructor")},q=function(e,t,n,r){if(s){if(n)for(var o in $){var a=l[o];if(a&&d(a.prototype,e))try{delete a.prototype[e]}catch(i){try{a.prototype[e]=t}catch(c){}}}x[e]&&!n||m(x,e,n?t:M&&S[e]||t,r)}},K=function(e,t,n){var r,o;if(s){if(w){if(n)for(r in $)if(o=l[r],o&&d(o,e))try{delete o[e]}catch(a){}if(O[e]&&!n)return;try{return m(O,e,n?t:M&&O[e]||t)}catch(a){}}for(r in $)o=l[r],!o||o[e]&&!n||m(o,e,t)}};for(r in $)o=l[r],a=o&&o.prototype,a?k(a)[U]=o:M=!1;for(r in B)o=l[r],a=o&&o.prototype,a&&(k(a)[U]=o);if((!M||!c(O)||O===Function.prototype)&&(O=function(){throw new P("Incorrect invocation")},M))for(r in $)l[r]&&w(l[r],O);if((!M||!x||x===_)&&(x=O.prototype,M))for(r in $)l[r]&&w(l[r].prototype,x);if(M&&y(T)!==x&&w(T,x),s&&!d(x,D))for(r in N=!0,g(x,D,{configurable:!0,get:function(){return u(this)?this[I]:void 0}}),$)l[r]&&p(l[r],I,r);e.exports={NATIVE_ARRAY_BUFFER_VIEWS:M,TYPED_ARRAY_TAG:N&&I,aTypedArray:X,aTypedArrayConstructor:W,exportTypedArrayMethod:q,exportTypedArrayStaticMethod:K,getTypedArrayConstructor:j,isView:F,isTypedArray:V,TypedArray:O,TypedArrayPrototype:x}},4979:function(e,t,n){"use strict";var r=n(6518),o=n(4576),a=n(7751),i=n(6980),s=n(4913).f,l=n(9297),c=n(679),u=n(3167),d=n(2603),f=n(5002),h=n(8574),p=n(3724),m=n(6395),g="DOMException",v=a("Error"),y=a(g),w=function(){c(this,b);var e=arguments.length,t=d(e<1?void 0:arguments[0]),n=d(e<2?void 0:arguments[1],"Error"),r=new y(t,n),o=new v(t);return o.name=g,s(r,"stack",i(1,h(o.stack,1))),u(r,this,w),r},b=w.prototype=y.prototype,E="stack"in new v(g),A="stack"in new y(1,2),k=y&&p&&Object.getOwnPropertyDescriptor(o,g),R=!!k&&!(k.writable&&k.configurable),L=E&&!R&&!A;r({global:!0,constructor:!0,forced:m||L},{DOMException:L?w:y});var S=a(g),C=S.prototype;if(C.constructor!==S)for(var T in m||s(C,"constructor",i(1,S)),f)if(l(f,T)){var O=f[T],x=O.s;l(S,x)||s(S,x,i(6,O.c))}},5002:function(e){"use strict";e.exports={IndexSizeError:{s:"INDEX_SIZE_ERR",c:1,m:1},DOMStringSizeError:{s:"DOMSTRING_SIZE_ERR",c:2,m:0},HierarchyRequestError:{s:"HIERARCHY_REQUEST_ERR",c:3,m:1},WrongDocumentError:{s:"WRONG_DOCUMENT_ERR",c:4,m:1},InvalidCharacterError:{s:"INVALID_CHARACTER_ERR",c:5,m:1},NoDataAllowedError:{s:"NO_DATA_ALLOWED_ERR",c:6,m:0},NoModificationAllowedError:{s:"NO_MODIFICATION_ALLOWED_ERR",c:7,m:1},NotFoundError:{s:"NOT_FOUND_ERR",c:8,m:1},NotSupportedError:{s:"NOT_SUPPORTED_ERR",c:9,m:1},InUseAttributeError:{s:"INUSE_ATTRIBUTE_ERR",c:10,m:1},InvalidStateError:{s:"INVALID_STATE_ERR",c:11,m:1},SyntaxError:{s:"SYNTAX_ERR",c:12,m:1},InvalidModificationError:{s:"INVALID_MODIFICATION_ERR",c:13,m:1},NamespaceError:{s:"NAMESPACE_ERR",c:14,m:1},InvalidAccessError:{s:"INVALID_ACCESS_ERR",c:15,m:1},ValidationError:{s:"VALIDATION_ERR",c:16,m:0},TypeMismatchError:{s:"TYPE_MISMATCH_ERR",c:17,m:1},SecurityError:{s:"SECURITY_ERR",c:18,m:1},NetworkError:{s:"NETWORK_ERR",c:19,m:1},AbortError:{s:"ABORT_ERR",c:20,m:1},URLMismatchError:{s:"URL_MISMATCH_ERR",c:21,m:1},QuotaExceededError:{s:"QUOTA_EXCEEDED_ERR",c:22,m:1},TimeoutError:{s:"TIMEOUT_ERR",c:23,m:1},InvalidNodeTypeError:{s:"INVALID_NODE_TYPE_ERR",c:24,m:1},DataCloneError:{s:"DATA_CLONE_ERR",c:25,m:1}}},5169:function(e,t,n){"use strict";var r=n(3238),o=TypeError;e.exports=function(e){if(r(e))throw new o("ArrayBuffer is detached");return e}},5623:function(e,t,n){"use strict";n(456)},5636:function(e,t,n){"use strict";var r=n(4576),o=n(9504),a=n(6706),i=n(7696),s=n(5169),l=n(7394),c=n(4483),u=n(1548),d=r.structuredClone,f=r.ArrayBuffer,h=r.DataView,p=Math.min,m=f.prototype,g=h.prototype,v=o(m.slice),y=a(m,"resizable","get"),w=a(m,"maxByteLength","get"),b=o(g.getInt8),E=o(g.setInt8);e.exports=(u||c)&&function(e,t,n){var r,o=l(e),a=void 0===t?o:i(t),m=!y||!y(e);if(s(e),u&&(e=d(e,{transfer:[e]}),o===a&&(n||m)))return e;if(o>=a&&(!n||m))r=v(e,0,a);else{var g=n&&!m&&w?{maxByteLength:w(e)}:void 0;r=new f(a,g);for(var A=new h(e),k=new h(r),R=p(a,o),L=0;L<R;L++)E(k,L,b(A,L))}return u||c(e),r}},5854:function(e,t,n){"use strict";var r=n(2777),o=TypeError;e.exports=function(e){var t=r(e,"number");if("number"==typeof t)throw new o("Can't convert number to bigint");return BigInt(t)}},6193:function(e,t,n){"use strict";var r=n(4215);e.exports="NODE"===r},6368:function(e,t,n){"use strict";var r=n(6518),o=n(4576),a=n(9225).clear;r({global:!0,bind:!0,enumerable:!0,forced:o.clearImmediate!==a},{clearImmediate:a})},6573:function(e,t,n){"use strict";var r=n(3724),o=n(2106),a=n(3238),i=ArrayBuffer.prototype;r&&!("detached"in i)&&o(i,"detached",{configurable:!0,get:function(){return a(this)}})},6632:function(e,t,n){"use strict";var r=n(6518),o=n(4576),a=n(9143),i=n(4154),s=o.Uint8Array,l=!s||!s.prototype.setFromBase64||!function(){var e=new s([255,255,255,255,255]);try{return void e.setFromBase64("",null)}catch(t){}try{return void e.setFromBase64("a")}catch(t){}try{e.setFromBase64("MjYyZg===")}catch(t){return 50===e[0]&&54===e[1]&&50===e[2]&&255===e[3]&&255===e[4]}}();s&&r({target:"Uint8Array",proto:!0,forced:l},{setFromBase64:function(e){i(this);var t=a(e,arguments.length>1?arguments[1]:void 0,this,this.length);return{read:t.read,written:t.written}}})},7394:function(e,t,n){"use strict";var r=n(4576),o=n(6706),a=n(2195),i=r.ArrayBuffer,s=r.TypeError;e.exports=i&&o(i.prototype,"byteLength","get")||function(e){if("ArrayBuffer"!==a(e))throw new s("ArrayBuffer expected");return e.byteLength}},7566:function(e,t,n){"use strict";var r=n(6840),o=n(9504),a=n(655),i=n(2812),s=URLSearchParams,l=s.prototype,c=o(l.getAll),u=o(l.has),d=new s("a=1");!d.has("a",2)&&d.has("a",void 0)||r(l,"has",function(e){var t=arguments.length,n=t<2?void 0:arguments[1];if(t&&void 0===n)return u(this,e);var r=c(this,e);i(t,1);var o=a(n),s=0;while(s<r.length)if(r[s++]===o)return!0;return!1},{enumerable:!0,unsafe:!0})},7680:function(e,t,n){"use strict";var r=n(9504);e.exports=r([].slice)},7696:function(e,t,n){"use strict";var r=n(1291),o=n(8014),a=RangeError;e.exports=function(e){if(void 0===e)return 0;var t=r(e),n=o(t);if(t!==n)throw new a("Wrong length or index");return n}},7811:function(e){"use strict";e.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},7936:function(e,t,n){"use strict";var r=n(6518),o=n(5636);o&&r({target:"ArrayBuffer",proto:!0},{transferToFixedLength:function(){return o(this,arguments.length?arguments[0]:void 0,!1)}})},8100:function(e,t,n){"use strict";var r=n(6518),o=n(5636);o&&r({target:"ArrayBuffer",proto:!0},{transfer:function(){return o(this,arguments.length?arguments[0]:void 0,!0)}})},8574:function(e,t,n){"use strict";var r=n(9504),o=Error,a=r("".replace),i=function(e){return String(new o(e).stack)}("zxcasd"),s=/\n\s*at [^:]*:[^\n]*/,l=s.test(i);e.exports=function(e,t){if(l&&"string"==typeof e&&!o.prepareStackTrace)while(t--)e=a(e,s,"");return e}},8646:function(e,t,n){"use strict";var r=n(9565),o=n(8551),a=n(1767),i=n(851);e.exports=function(e,t){t&&"string"===typeof e||o(e);var n=i(e);return a(o(void 0!==n?r(n,e):e))}},8721:function(e,t,n){"use strict";var r=n(3724),o=n(9504),a=n(2106),i=URLSearchParams.prototype,s=o(i.forEach);r&&!("size"in i)&&a(i,"size",{get:function(){var e=0;return s(this,function(){e++}),e},configurable:!0,enumerable:!0})},9143:function(e,t,n){"use strict";var r=n(4576),o=n(9504),a=n(3972),i=n(3463),s=n(9297),l=n(2804),c=n(944),u=n(5169),d=l.c2i,f=l.c2iUrl,h=r.SyntaxError,p=r.TypeError,m=o("".charAt),g=function(e,t){for(var n=e.length;t<n;t++){var r=m(e,t);if(" "!==r&&"\t"!==r&&"\n"!==r&&"\f"!==r&&"\r"!==r)break}return t},v=function(e,t,n){var r=e.length;r<4&&(e+=2===r?"AA":"A");var o=(t[m(e,0)]<<18)+(t[m(e,1)]<<12)+(t[m(e,2)]<<6)+t[m(e,3)],a=[o>>16&255,o>>8&255,255&o];if(2===r){if(n&&0!==a[1])throw new h("Extra bits");return[a[0]]}if(3===r){if(n&&0!==a[2])throw new h("Extra bits");return[a[0],a[1]]}return a},y=function(e,t,n){for(var r=t.length,o=0;o<r;o++)e[n+o]=t[o];return n+r};e.exports=function(e,t,n,r){i(e),a(t);var o="base64"===c(t)?d:f,l=t?t.lastChunkHandling:void 0;if(void 0===l&&(l="loose"),"loose"!==l&&"strict"!==l&&"stop-before-partial"!==l)throw new p("Incorrect `lastChunkHandling` option");n&&u(n.buffer);var w=e.length,b=n||[],E=0,A=0,k="",R=0;if(r)while(1){if(R=g(e,R),R===w){if(k.length>0){if("stop-before-partial"===l)break;if("loose"!==l)throw new h("Missing padding");if(1===k.length)throw new h("Malformed padding: exactly one additional character");E=y(b,v(k,o,!1),E)}A=w;break}var L=m(e,R);if(++R,"="===L){if(k.length<2)throw new h("Padding is too early");if(R=g(e,R),2===k.length){if(R===w){if("stop-before-partial"===l)break;throw new h("Malformed padding: only one =")}"="===m(e,R)&&(++R,R=g(e,R))}if(R<w)throw new h("Unexpected character after padding");E=y(b,v(k,o,"strict"===l),E),A=w;break}if(!s(o,L))throw new h("Unexpected character");var S=r-E;if(1===S&&2===k.length||2===S&&3===k.length)break;if(k+=L,4===k.length&&(E=y(b,v(k,o,!1),E),k="",A=R,E===r))break}return{bytes:b,read:A,written:E}}},9225:function(e,t,n){"use strict";var r,o,a,i,s=n(4576),l=n(8745),c=n(6080),u=n(4901),d=n(9297),f=n(9039),h=n(397),p=n(7680),m=n(4055),g=n(2812),v=n(9544),y=n(6193),w=s.setImmediate,b=s.clearImmediate,E=s.process,A=s.Dispatch,k=s.Function,R=s.MessageChannel,L=s.String,S=0,C={},T="onreadystatechange";f(function(){r=s.location});var O=function(e){if(d(C,e)){var t=C[e];delete C[e],t()}},x=function(e){return function(){O(e)}},_=function(e){O(e.data)},P=function(e){s.postMessage(L(e),r.protocol+"//"+r.host)};w&&b||(w=function(e){g(arguments.length,1);var t=u(e)?e:k(e),n=p(arguments,1);return C[++S]=function(){l(t,void 0,n)},o(S),S},b=function(e){delete C[e]},y?o=function(e){E.nextTick(x(e))}:A&&A.now?o=function(e){A.now(x(e))}:R&&!v?(a=new R,i=a.port2,a.port1.onmessage=_,o=c(i.postMessage,i)):s.addEventListener&&u(s.postMessage)&&!s.importScripts&&r&&"file:"!==r.protocol&&!f(P)?(o=P,s.addEventListener("message",_,!1)):o=T in m("script")?function(e){h.appendChild(m("script"))[T]=function(){h.removeChild(this),O(e)}}:function(e){setTimeout(x(e),0)}),e.exports={set:w,clear:b}},9309:function(e,t,n){"use strict";var r=n(6518),o=n(4576),a=n(9225).set,i=n(9472),s=o.setImmediate?i(a,!1):a;r({global:!0,bind:!0,enumerable:!0,forced:o.setImmediate!==s},{setImmediate:s})},9429:function(e,t,n){"use strict";var r=n(4576),o=n(6193);e.exports=function(e){if(o){try{return r.process.getBuiltinModule(e)}catch(t){}try{return Function('return require("'+e+'")')()}catch(t){}}}},9472:function(e,t,n){"use strict";var r=n(4576),o=n(8745),a=n(4901),i=n(4215),s=n(2839),l=n(7680),c=n(2812),u=r.Function,d=/MSIE .\./.test(s)||"BUN"===i&&function(){var e=r.Bun.version.split(".");return e.length<3||"0"===e[0]&&(e[1]<3||"3"===e[1]&&"0"===e[2])}();e.exports=function(e,t){var n=t?2:1;return d?function(r,i){var s=c(arguments.length,1)>n,d=a(r)?r:u(r),f=s?l(arguments,n):[],h=s?function(){o(d,this,f)}:d;return t?e(h,i):e(h)}:e}},9486:function(e,t,n){"use strict";var r=n(6518),o=n(4576),a=n(9504),i=n(3972),s=n(4154),l=n(5169),c=n(2804),u=n(944),d=c.i2c,f=c.i2cUrl,h=a("".charAt),p=o.Uint8Array,m=!p||!p.prototype.toBase64||!function(){try{var e=new p;e.toBase64(null)}catch(t){return!0}}();p&&r({target:"Uint8Array",proto:!0,forced:m},{toBase64:function(){var e=s(this),t=arguments.length?i(arguments[0]):void 0,n="base64"===u(t)?d:f,r=!!t&&!!t.omitPadding;l(this.buffer);for(var o,a="",c=0,p=e.length,m=function(e){return h(n,o>>6*e&63)};c+2<p;c+=3)o=(e[c]<<16)+(e[c+1]<<8)+e[c+2],a+=m(3)+m(2)+m(1)+m(0);return c+2===p?(o=(e[c]<<16)+(e[c+1]<<8),a+=m(3)+m(2)+m(1)+(r?"":"=")):c+1===p&&(o=e[c]<<16,a+=m(3)+m(2)+(r?"":"==")),a}})},9544:function(e,t,n){"use strict";var r=n(2839);e.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(r)},9577:function(e,t,n){"use strict";var r=n(9928),o=n(4644),a=n(1108),i=n(1291),s=n(5854),l=o.aTypedArray,c=o.getTypedArrayConstructor,u=o.exportTypedArrayMethod,d=function(){try{new Int8Array(1)["with"](2,{valueOf:function(){throw 8}})}catch(e){return 8===e}}(),f=d&&function(){try{new Int8Array(1)["with"](-.5,1)}catch(e){return!0}}();u("with",{with:function(e,t){var n=l(this),o=i(e),u=a(n)?s(t):+t;return r(n,c(n),o,u)}}["with"],!d||f)},9631:function(e,t,n){"use strict";n(9486)},9797:function(e,t,n){"use strict";n(4226)},9848:function(e,t,n){"use strict";n(6368),n(9309)},9928:function(e,t,n){"use strict";var r=n(6198),o=n(1291),a=RangeError;e.exports=function(e,t,n,i){var s=r(e),l=o(n),c=l<0?s+l:l;if(c>=s||c<0)throw new a("Incorrect index");for(var u=new t(s),d=0;d<s;d++)u[d]=d===c?i:e[d];return u}}}]);
//# sourceMappingURL=824.c25a732d.js.map